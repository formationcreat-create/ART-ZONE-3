<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ART ZONE PRO | Complete Coaching Management System</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
:root {
    --primary: #1a237e;
    --primary-light: #534bae;
    --secondary: #ffab00;
    --success: #00c853;
    --danger: #ff5252;
    --warning: #ff9800;
    --info: #2196f3;
    --dark: #0d1b2a;
    --light: #f8f9fa;
    --glass: rgba(255, 255, 255, 0.15);
    --glass-dark: rgba(0, 0, 0, 0.2);
    --gradient: linear-gradient(135deg, #1a237e 0%, #311b92 50%, #4527a0 100%);
    --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.2);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --radius: 16px;
    --radius-sm: 8px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

body {
    background: var(--gradient);
    color: var(--light);
    min-height: 100vh;
    overflow-x: hidden;
}

::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: var(--secondary);
    border-radius: 10px;
}

.navbar {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    padding: 15px 5%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 1000;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'Montserrat', sans-serif;
    font-size: 1.8rem;
    font-weight: 800;
    color: #fff;
}

.logo i {
    color: var(--secondary);
}

.nav-links {
    display: flex;
    gap: 25px;
}

.nav-link {
    color: #fff;
    text-decoration: none;
    font-weight: 500;
    padding: 8px 16px;
    border-radius: 20px;
    transition: var(--transition);
    position: relative;
    cursor: pointer;
}

.nav-link:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--secondary);
}

.nav-link.active {
    background: var(--secondary);
    color: var(--dark);
}

.mobile-menu-btn {
    display: none;
    background: none;
    border: none;
    color: #fff;
    font-size: 1.5rem;
    cursor: pointer;
    padding: 10px;
}

.hero {
    padding: 100px 5% 60px;
    text-align: center;
    max-width: 1200px;
    margin: 0 auto;
}

.hero h1 {
    font-family: 'Montserrat', sans-serif;
    font-size: 3.5rem;
    margin-bottom: 20px;
    background: linear-gradient(45deg, #fff, var(--secondary));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    line-height: 1.2;
}

.hero p {
    font-size: 1.2rem;
    opacity: 0.9;
    max-width: 700px;
    margin: 0 auto 40px;
}

.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    padding: 40px 5%;
    max-width: 1400px;
    margin: 0 auto;
}

.card {
    background: var(--glass);
    backdrop-filter: blur(10px);
    padding: 40px 30px;
    border-radius: var(--radius);
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
}

.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.05), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s;
}

.card:hover::before {
    transform: translateX(100%);
}

.card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: var(--shadow-lg);
    border-color: var(--secondary);
}

.card-icon {
    font-size: 3rem;
    margin-bottom: 20px;
    color: var(--secondary);
}

.card h3 {
    font-size: 1.8rem;
    margin-bottom: 15px;
    color: #fff;
}

.card p {
    opacity: 0.8;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.9);
}

.form-container {
    max-width: 600px;
    margin: 60px auto;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    padding: 40px;
    border-radius: var(--radius);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow);
}

.form-title {
    text-align: center;
    margin-bottom: 30px;
    font-family: 'Montserrat', sans-serif;
    font-size: 2rem;
    color: #fff;
}

.form-group {
    margin-bottom: 25px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: #fff;
}

.form-input, .form-textarea, .form-select {
    width: 100%;
    padding: 14px 20px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-sm);
    color: #fff;
    font-size: 1rem;
    transition: var(--transition);
}

.form-select option {
    background: var(--dark);
    color: #fff;
}

.admin-main .form-select {
    background: white;
    color: var(--dark);
}

.admin-main .form-select option {
    background: white;
    color: var(--dark);
}

.form-input:focus, .form-textarea:focus, .form-select:focus {
    outline: none;
    border-color: var(--secondary);
    box-shadow: 0 0 0 3px rgba(255, 171, 0, 0.2);
}

.form-input::placeholder, .form-textarea::placeholder {
    color: rgba(255, 255, 255, 0.6);
}

.form-textarea {
    min-height: 120px;
    resize: vertical;
}

.btn {
    padding: 14px 30px;
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.btn-primary {
    background: var(--secondary);
    color: var(--dark);
}

.btn-primary:hover {
    background: #ffb300;
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(255, 171, 0, 0.3);
}

.btn-secondary {
    background: transparent;
    color: #fff;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--secondary);
}

.btn-danger {
    background: var(--danger);
    color: white;
}

.btn-sm {
    padding: 8px 16px;
    font-size: 0.9rem;
}

.btn-full {
    width: 100%;
}

.course-category-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.category-btn {
    flex: 1;
    padding: 15px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-sm);
    color: white;
    cursor: pointer;
    transition: var(--transition);
    text-align: center;
}

.category-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: var(--secondary);
}

.category-btn.active {
    background: var(--secondary);
    border-color: var(--secondary);
    color: var(--dark);
    font-weight: 600;
}

.category-btn i {
    display: block;
    font-size: 1.5rem;
    margin-bottom: 8px;
}

.course-badge {
    background: var(--primary);
    color: white;
    padding: 12px 20px;
    border-radius: var(--radius-sm);
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    border: 2px solid transparent;
    text-align: center;
    min-width: 150px;
}

.course-badge:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    border-color: var(--secondary);
}

.course-badge.selected {
    background: var(--secondary);
    color: var(--dark);
    border-color: var(--secondary);
    font-weight: 600;
}

.course-badge i {
    margin-right: 8px;
}

.course-options {
    margin-top: 15px;
}

.course-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.admin-layout {
    display: flex;
    min-height: 100vh;
}

.sidebar {
    width: 280px;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
    padding: 30px 20px;
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    position: sticky;
    top: 0;
    height: 100vh;
    overflow-y: auto;
}

.sidebar-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 40px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.sidebar-header h3 {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.5rem;
    color: #fff;
}

.sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.sidebar-btn {
    padding: 15px 20px;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: #fff;
    text-align: left;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 15px;
    position: relative;
}

.sidebar-btn:hover {
    background: rgba(255, 255, 255, 0.1);
}

.sidebar-btn.active {
    background: var(--secondary);
    color: var(--dark);
}

.sidebar-btn .badge {
    position: absolute;
    right: 15px;
    background: var(--danger);
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
}

.admin-main {
    flex: 1;
    padding: 40px;
    background: #f8fafc;
    min-height: 100vh;
}

.admin-main h1,
.admin-main h2,
.admin-main h3,
.admin-main h4,
.admin-main p,
.admin-main label,
.admin-main td,
.admin-main th {
    color: var(--dark);
}

.admin-main .section-header {
    color: var(--dark);
}

.admin-main .section-title {
    color: var(--primary);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.section-title {
    font-family: 'Montserrat', sans-serif;
    font-size: 2rem;
    color: var(--primary);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
}

.stat-card {
    background: white;
    border-radius: var(--radius);
    padding: 30px;
    box-shadow: var(--shadow);
    transition: var(--transition);
    position: relative;
    overflow: hidden;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 6px;
    height: 100%;
}

.stat-card:nth-child(1)::before { background: var(--primary); }
.stat-card:nth-child(2)::before { background: var(--success); }
.stat-card:nth-child(3)::before { background: var(--info); }
.stat-card:nth-child(4)::before { background: var(--warning); }

.stat-value {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 10px;
    color: var(--dark);
}

.stat-label {
    color: #666;
    font-weight: 500;
}

.stat-change {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-top: 10px;
    font-size: 0.9rem;
}

.stat-change.positive {
    color: var(--success);
}

.stat-change.negative {
    color: var(--danger);
}

.table-container {
    background: white;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
}

.table {
    width: 100%;
    border-collapse: collapse;
}

.table thead {
    background: var(--primary);
}

.table th {
    padding: 18px 15px;
    text-align: left;
    color: white;
    font-weight: 600;
    border-bottom: 2px solid var(--primary-light);
}

.table tbody tr {
    border-bottom: 1px solid #eee;
    transition: var(--transition);
}

.table tbody tr:hover {
    background: #f9f9f9;
}

.table td {
    padding: 15px;
    color: #333;
    vertical-align: middle;
}

.table-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.gallery-item {
    position: relative;
    border-radius: var(--radius-sm);
    overflow: hidden;
    height: 200px;
    cursor: pointer;
}

.gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: var(--transition);
}

.gallery-item:hover img {
    transform: scale(1.05);
}

.gallery-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    padding: 15px;
    color: white;
    opacity: 0;
    transition: var(--transition);
}

.gallery-item:hover .gallery-overlay {
    opacity: 1;
}

.gallery-upload {
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.1);
    border: 2px dashed rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: var(--transition);
}

.gallery-upload:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: var(--secondary);
}

.gallery-upload i {
    font-size: 3rem;
    color: rgba(255, 255, 255, 0.5);
}

.upload-label {
    margin-top: 10px;
    font-weight: 500;
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal.active {
    display: flex;
}

.modal-content {
    background: white;
    border-radius: var(--radius);
    max-width: 800px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    animation: modalFade 0.3s ease;
    box-shadow: var(--shadow-lg);
}

@keyframes modalFade {
    from { opacity: 0; transform: translateY(-30px); }
    to { opacity: 1; transform: translateY(0); }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 25px 30px;
    border-bottom: 1px solid #eee;
}

.modal-title {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.8rem;
    color: var(--primary);
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.8rem;
    color: #999;
    cursor: pointer;
    transition: var(--transition);
    padding: 5px;
}

.modal-close:hover {
    color: var(--danger);
}

.modal-body {
    padding: 30px;
}

.progress-bar {
    height: 8px;
    background: #e0e0e0;
    border-radius: 4px;
    overflow: hidden;
    margin: 20px 0;
}

.progress-fill {
    height: 100%;
    background: var(--success);
    border-radius: 4px;
    transition: width 0.5s ease;
}

@media (max-width: 1024px) {
    .admin-layout {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        height: auto;
        position: static;
        border-right: none;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .sidebar-nav {
        flex-direction: row;
        overflow-x: auto;
        padding-bottom: 10px;
    }
    
    .sidebar-btn {
        white-space: nowrap;
    }
}

@media (max-width: 768px) {
    .navbar {
        padding: 15px 20px;
    }
    
    .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        flex-direction: column;
        padding: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        z-index: 1000;
    }
    
    .nav-links.active {
        display: flex;
    }
    
    .mobile-menu-btn {
        display: block;
    }
    
    .hero h1 {
        font-size: 2.5rem;
    }
    
    .grid {
        grid-template-columns: 1fr;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .table-container {
        overflow-x: auto;
    }
    
    .course-category-tabs {
        flex-direction: column;
    }
}

@media (max-width: 480px) {
    .hero h1 {
        font-size: 2rem;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .table-actions {
        flex-direction: column;
    }
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: var(--secondary);
    animation: spin 1s ease-in-out infinite;
    margin: 0 auto;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.fade-in {
    animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.slide-up {
    animation: slideUp 0.4s ease;
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 15px 25px;
    background: white;
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    gap: 15px;
    z-index: 3000;
    transform: translateX(150%);
    transition: transform 0.3s ease;
}

.notification.active {
    transform: translateX(0);
}

.notification.success {
    border-left: 4px solid var(--success);
}

.notification.error {
    border-left: 4px solid var(--danger);
}

.notification.info {
    border-left: 4px solid var(--info);
}

.search-bar {
    position: relative;
    max-width: 400px;
}

.search-input {
    width: 100%;
    padding: 12px 20px 12px 45px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 25px;
    color: #fff;
    font-size: 1rem;
}

.search-icon {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: rgba(255, 255, 255, 0.6);
}

.tabs {
    display: flex;
    border-bottom: 1px solid #ddd;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.tab-btn {
    padding: 15px 30px;
    background: none;
    border: none;
    font-weight: 600;
    color: #666;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: var(--transition);
    white-space: nowrap;
}

.tab-btn:hover {
    color: var(--primary);
}

.tab-btn.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.5s ease;
}

.calendar-widget {
    background: white;
    border-radius: var(--radius);
    padding: 25px;
    box-shadow: var(--shadow);
}

.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 10px;
}

.calendar-day {
    text-align: center;
    padding: 10px;
    border-radius: 8px;
    font-weight: 500;
    color: var(--dark);
}

.calendar-day.header {
    font-weight: 600;
    color: var(--primary);
}

.calendar-day.today {
    background: var(--secondary);
    color: var(--dark);
}

.calendar-day.event {
    background: rgba(33, 150, 243, 0.1);
    color: var(--info);
    position: relative;
}

.calendar-day.event::after {
    content: '';
    position: absolute;
    bottom: 5px;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 6px;
    background: var(--info);
    border-radius: 50%;
}

.profile-card {
    background: white;
    border-radius: var(--radius);
    padding: 30px;
    box-shadow: var(--shadow);
    text-align: center;
}

.profile-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    margin: 0 auto 20px;
    background: var(--gradient);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    color: white;
}

.profile-name {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.8rem;
    color: var(--dark);
    margin-bottom: 10px;
}

.profile-role {
    color: var(--primary);
    font-weight: 600;
    margin-bottom: 20px;
}

.profile-stats {
    display: flex;
    justify-content: space-around;
    margin-top: 25px;
    padding-top: 25px;
    border-top: 1px solid #eee;
}

.profile-stat {
    text-align: center;
}

.profile-stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--dark);
}

.profile-stat-label {
    font-size: 0.9rem;
    color: #666;
}

.pagination {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 30px;
}

.pagination-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    cursor: pointer;
    transition: var(--transition);
    color: var(--dark);
}

.pagination-btn:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.pagination-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.pagination-btn.disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.file-upload {
    border: 2px dashed rgba(255, 255, 255, 0.3);
    border-radius: var(--radius);
    padding: 40px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
    color: white;
}

.file-upload:hover {
    border-color: var(--secondary);
    background: rgba(255, 255, 255, 0.05);
}

.file-upload i {
    font-size: 3rem;
    color: rgba(255, 255, 255, 0.5);
    margin-bottom: 15px;
}

.file-upload input {
    display: none;
}

.dark-form .form-input,
.dark-form .form-textarea,
.dark-form .form-select {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
}

.dark-form .form-label {
    color: #fff;
}

.dark-form .form-input::placeholder,
.dark-form .form-textarea::placeholder {
    color: rgba(255, 255, 255, 0.6);
}

.modal-content,
.modal-content h3,
.modal-content p,
.modal-content label,
.modal-content input,
.modal-content select,
.modal-content textarea {
    color: var(--dark);
}

.modal-content .form-input,
.modal-content .form-select {
    color: var(--dark);
    background: white;
}

.modal-content .form-input::placeholder {
    color: #666;
}

.status-indicator {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 16px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.9rem;
}

.status-pending {
    background: rgba(255, 193, 7, 0.2);
    color: #ff9800;
    border: 1px solid rgba(255, 193, 7, 0.3);
}

.status-approved {
    background: rgba(76, 175, 80, 0.2);
    color: #4caf50;
    border: 1px solid rgba(76, 175, 80, 0.3);
}

.status-rejected {
    background: rgba(244, 67, 54, 0.2);
    color: #f44336;
    border: 1px solid rgba(244, 67, 54, 0.3);
}

.status-paid {
    background: rgba(76, 175, 80, 0.2);
    color: #4caf50;
    border: 1px solid rgba(76, 175, 80, 0.3);
}

.status-unpaid {
    background: rgba(255, 152, 0, 0.2);
    color: #ff9800;
    border: 1px solid rgba(255, 152, 0, 0.3);
}

.status-partial {
    background: rgba(33, 150, 243, 0.2);
    color: #2196f3;
    border: 1px solid rgba(33, 150, 243, 0.3);
}

.status-card {
    background: white;
    border-radius: var(--radius);
    padding: 30px;
    box-shadow: var(--shadow);
    color: var(--dark);
    margin-bottom: 20px;
}

.status-card h3 {
    color: var(--primary);
    margin-bottom: 20px;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 10px;
}

.status-detail {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px dashed #eee;
}

.status-detail:last-child {
    border-bottom: none;
}

.status-detail-label {
    font-weight: 600;
    color: #555;
    min-width: 150px;
}

.status-detail-value {
    color: #333;
    text-align: right;
    flex: 1;
}

.status-check-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: var(--radius);
    padding: 30px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin: 20px auto;
    max-width: 500px;
}

.status-check-card h3 {
    color: var(--secondary);
    margin-bottom: 20px;
    font-size: 1.8rem;
}

.status-timeline {
    margin-top: 30px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-sm);
}

.timeline-item {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    padding-left: 20px;
    position: relative;
}

.timeline-item:before {
    content: '';
    position: absolute;
    left: 0;
    top: 10px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--secondary);
}

.timeline-item.completed:before {
    background: var(--success);
}

.timeline-item.current:before {
    background: var(--secondary);
    box-shadow: 0 0 0 3px rgba(255, 171, 0, 0.3);
}

.timeline-item.pending:before {
    background: #ddd;
}

.timeline-content {
    margin-left: 20px;
}

.timeline-date {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
    margin-top: 5px;
}

.payment-summary {
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-sm);
    padding: 15px;
    margin-top: 10px;
}

.payment-summary.dark {
    background: rgba(0, 0, 0, 0.1);
}

.payment-row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
}

.payment-row:last-child {
    border-bottom: none;
}

.payment-label {
    color: rgba(255, 255, 255, 0.8);
}

.payment-value {
    font-weight: 600;
    color: var(--secondary);
}

.payment-timeline {
    margin-top: 20px;
}

.payment-step {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    padding-left: 25px;
    position: relative;
}

.payment-step:before {
    content: '';
    position: absolute;
    left: 0;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    background: #ddd;
}

.payment-step.completed:before {
    background: var(--success);
}

.payment-step.current:before {
    background: var(--secondary);
    box-shadow: 0 0 0 3px rgba(255, 171, 0, 0.3);
}

.payment-step-content {
    margin-left: 10px;
}

.payment-step-title {
    font-weight: 600;
    color: var(--dark);
}

.payment-step-date {
    font-size: 0.85rem;
    color: #666;
}

#settings .form-container {
    background: white;
    border: 1px solid #e0e0e0;
}

#settings .form-container .form-label,
#settings .form-container .form-input,
#settings .form-container .form-select,
#settings .form-container .form-textarea {
    color: #333 !important;
}

#settings .form-container .form-input::placeholder,
#settings .form-container .form-textarea::placeholder {
    color: #666 !important;
}

#settings .form-container .form-input,
#settings .form-container .form-select,
#settings .form-container .form-textarea {
    background: #f8f9fa !important;
    border: 1px solid #ddd !important;
    color: #333 !important;
}

#settings .form-container .form-input:focus,
#settings .form-container .form-select:focus,
#settings .form-container .form-textarea:focus {
    background: white !important;
    border-color: var(--secondary) !important;
    box-shadow: 0 0 0 3px rgba(255, 171, 0, 0.2) !important;
}

#settings .dark-form {
    background: white !important;
}

#settings .dark-form .form-label {
    color: #333 !important;
}

#settings .dark-form .form-input,
#settings .dark-form .form-select,
#settings .dark-form .form-textarea {
    color: #333 !important;
    background: #f8f9fa !important;
    border: 1px solid #ddd !important;
}

/* ==================== SYLLABUS PANEL BUTTON STYLES ==================== */
#syllabus .table-actions {
    gap: 6px;
}

#syllabus .table-actions .btn-sm {
    padding: 6px 12px;
    border-radius: 6px;
    font-weight: 600;
    font-size: 0.85rem;
    border: none;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    min-width: 70px;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

#syllabus .table-actions .btn-secondary {
    background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
    color: white;
}

#syllabus .table-actions .btn-secondary:hover {
    background: linear-gradient(135deg, #1976D2 0%, #0D47A1 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

#syllabus .table-actions .btn-danger {
    background: linear-gradient(135deg, #F44336 0%, #D32F2F 100%);
    color: white;
}

#syllabus .table-actions .btn-danger:hover {
    background: linear-gradient(135deg, #D32F2F 0%, #B71C1C 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
}

#syllabus .table-actions .btn-sm i {
    font-size: 0.8rem;
}

/* ==================== ADMISSION MANAGEMENT BUTTON STYLES ==================== */
#admissions .table-actions {
    gap: 6px;
}

#admissions .table-actions .btn-sm {
    padding: 6px 12px;
    border-radius: 6px;
    font-weight: 600;
    font-size: 0.85rem;
    border: none;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    min-width: 70px;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

#admissions .table-actions .btn-secondary {
    background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
    color: white;
}

#admissions .table-actions .btn-secondary:hover {
    background: linear-gradient(135deg, #1976D2 0%, #0D47A1 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

#admissions .table-actions .btn-primary {
    background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
    color: white;
}

#admissions .table-actions .btn-primary:hover {
    background: linear-gradient(135deg, #388E3C 0%, #2E7D32 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

#admissions .table-actions .btn-danger {
    background: linear-gradient(135deg, #F44336 0%, #D32F2F 100%);
    color: white;
}

#admissions .table-actions .btn-danger:hover {
    background: linear-gradient(135deg, #D32F2F 0%, #B71C1C 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
}

#admissions #approvedTab .table-actions .btn-primary {
    background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
    color: white;
}

#admissions #approvedTab .table-actions .btn-primary:hover {
    background: linear-gradient(135deg, #F57C00 0%, #EF6C00 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
}

#admissions .table-actions .btn-sm i {
    font-size: 0.8rem;
}

#admissions .table-actions .btn-sm:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
}

/* ==================== STUDENT MANAGEMENT BUTTON STYLES ==================== */
#students .table-actions {
    gap: 6px;
}

#students .table-actions .btn-sm {
    padding: 6px 12px;
    border-radius: 6px;
    font-weight: 600;
    font-size: 0.85rem;
    border: none;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    min-width: 70px;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

#students .table-actions .btn-secondary {
    background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
    color: white;
}

#students .table-actions .btn-secondary:hover {
    background: linear-gradient(135deg, #1976D2 0%, #0D47A1 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

#students .table-actions .btn-primary {
    background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
    color: white;
}

#students .table-actions .btn-primary:hover {
    background: linear-gradient(135deg, #388E3C 0%, #2E7D32 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

#students .table-actions .btn-danger {
    background: linear-gradient(135deg, #F44336 0%, #D32F2F 100%);
    color: white;
}

#students .table-actions .btn-danger:hover {
    background: linear-gradient(135deg, #D32F2F 0%, #B71C1C 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
}

#students .table-actions .btn-sm i {
    font-size: 0.8rem;
}

/* Student Management - Enhanced Styling */
#students .table td {
    vertical-align: middle !important;
    padding: 12px 15px !important;
}

#students .status-indicator {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}

#students .status-indicator i {
    font-size: 0.7rem;
}

/* Animation for highlighting rows */
@keyframes highlight-row {
    0% { background-color: rgba(255, 193, 7, 0.2); }
    100% { background-color: transparent; }
}

/* ==================== PAYMENT MANAGEMENT STYLES ==================== */
.payment-method-options {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin-bottom: 20px;
}

.payment-method-btn {
    padding: 15px 10px;
    background: #f8f9fa;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}

.payment-method-btn:hover {
    border-color: var(--primary);
}

.payment-method-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.payment-method-btn i {
    font-size: 1.5rem;
    margin-bottom: 5px;
    display: block;
}

.payment-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-bottom: 20px;
}

.payment-stat-card {
    background: white;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.payment-stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 5px;
}

.payment-stat-label {
    font-size: 0.9rem;
    color: #666;
}

.amount-input {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--primary);
}

.amount-input::placeholder {
    font-size: 0.9rem;
    font-weight: normal;
    color: #999;
}

.payment-history-item {
    background: white;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 10px;
    border-left: 4px solid var(--success);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.payment-history-item.refund {
    border-left-color: var(--danger);
}

.payment-history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.payment-history-amount {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--success);
}

.payment-history-amount.refund {
    color: var(--danger);
}

.payment-history-method {
    padding: 3px 10px;
    background: #e9ecef;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}

.payment-history-details {
    color: #666;
    font-size: 0.9rem;
}

.payment-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    border-bottom: 1px solid #e0e0e0;
    padding-bottom: 10px;
}

.payment-tab {
    padding: 10px 20px;
    background: #f8f9fa;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
}

.payment-tab.active {
    background: var(--primary);
    color: white;
}

/* Fix for student management table alignment */
#students .table-actions {
    display: flex;
    gap: 6px;
    flex-wrap: nowrap;
    justify-content: center;
}

#students .table tbody tr:hover {
    background-color: #f5f5f5;
    transition: background-color 0.2s ease;
}

/* Ensure all table cells are vertically aligned */
.admin-main .table td {
    vertical-align: middle !important;
}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="logo">
        <i class="fas fa-palette"></i>
        <span>ART ZONE PRO</span>
    </div>
    
    <div class="nav-links" id="navLinks">
        <a class="nav-link active" onclick="showHome()">Home</a>
        <a class="nav-link" onclick="showCreativeArt()">Creative Art</a>
        <a class="nav-link" onclick="showAcademic()">Academic</a>
        <a class="nav-link" onclick="showEvents()">Events</a>
        <a class="nav-link" onclick="showGallery()">Gallery</a>
        <a class="nav-link" onclick="showStatusCheck()">Check Status</a>
        <a class="nav-link" onclick="showAdminLogin()">Admin</a>
    </div>
    
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
    </button>
</nav>

<!-- HOME PAGE -->
<div id="home" class="fade-in">
    <div class="hero">
        <h1>Transform Your Creativity Into Excellence</h1>
        <p>Join India's premier coaching institute where art meets academics. We nurture talent with world-class training, personalized attention, and innovative teaching methodologies.</p>
        <div style="margin-top: 40px;">
            <button class="btn btn-primary" onclick="showAdmissionForm()">
                <i class="fas fa-user-plus"></i> Enroll Now
            </button>
            <button class="btn btn-secondary" onclick="showStatusCheck()" style="margin-left: 15px;">
                <i class="fas fa-search"></i> Check Application Status
            </button>
        </div>
    </div>
    
    <div class="grid">
        <div class="card" onclick="showCreativeArt()">
            <div class="card-icon">
                <i class="fas fa-paint-brush"></i>
            </div>
            <h3>Creative Art</h3>
            <p>Master drawing, painting, digital art, and sculpture with expert guidance. From beginners to advanced artists.</p>
            <div style="margin-top: 20px; color: var(--secondary); font-weight: 600;">
                <i class="fas fa-star"></i> 10+ Courses Available
            </div>
        </div>
        
        <div class="card" onclick="showAcademic()">
            <div class="card-icon">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h3>Academic Excellence</h3>
            <p>Comprehensive coaching for CBSE, ICSE, State boards. Special focus on competitive exams and olympiads.</p>
            <div style="margin-top: 20px; color: var(--secondary); font-weight: 600;">
                <i class="fas fa-chart-line"></i> 10+ Courses Available
            </div>
        </div>
        
        <div class="card" onclick="showEvents()">
            <div class="card-icon">
                <i class="fas fa-calendar-alt"></i>
            </div>
            <h3>Events & Workshops</h3>
            <p>Regular workshops, art exhibitions, competitions, and guest lectures by industry experts.</p>
            <div style="margin-top: 20px; color: var(--secondary); font-weight: 600;">
                <i class="fas fa-users"></i> 50+ Events Yearly
            </div>
        </div>
    </div>
    
    <!-- Application Status Check Section -->
    <div class="status-check-card" style="margin-top: 50px;">
        <h3><i class="fas fa-search"></i> Check Your Application Status</h3>
        <p style="margin-bottom: 20px; opacity: 0.8;">Enter your Application ID to check the status of your admission application</p>
        
        <div class="form-group">
            <div style="position: relative;">
                <input type="text" class="form-input" id="statusCheckInput" placeholder="Enter your Application ID (e.g., STU123456789)">
                <i class="fas fa-id-card" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); opacity: 0.6;"></i>
            </div>
        </div>
        
        <button class="btn btn-primary btn-full" onclick="checkApplicationStatus()">
            <i class="fas fa-search"></i> Check Status
        </button>
        
        <p style="margin-top: 15px; font-size: 0.9rem; opacity: 0.7;">
            <i class="fas fa-info-circle"></i> You can find your Application ID in the receipt email or message
        </p>
    </div>
    
    <!-- Admission Form -->
    <div id="admissionForm" class="form-container" style="display: none;">
        <h2 class="form-title">Student Admission Form</h2>
        <div class="form-group">
            <label class="form-label">Full Name *</label>
            <input type="text" class="form-input" id="studentName" placeholder="Enter student's full name">
        </div>
        
        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label class="form-label">Class/Grade *</label>
                <select class="form-select" id="studentClass">
                    <option value="">Select Class</option>
                    <option>Pre-School</option>
                    <option>Class 1-5</option>
                    <option>Class 6-8</option>
                    <option>Class 9-10</option>
                    <option>Class 11-12</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Date of Birth</label>
                <input type="date" class="form-input" id="studentDOB">
            </div>
        </div>
        
        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label class="form-label">Mobile Number *</label>
                <input type="tel" class="form-input" id="studentMobile" placeholder="10-digit mobile number">
            </div>
            
            <div class="form-group">
                <label class="form-label">Email Address</label>
                <input type="email" class="form-input" id="studentEmail" placeholder="student@example.com">
            </div>
        </div>
        
        <!-- Course Selection Section -->
        <div class="form-group">
            <label class="form-label">Select Course Category *</label>
            <div class="course-category-tabs">
                <button class="category-btn" onclick="selectCourseCategory('creative')" id="creativeBtn">
                    <i class="fas fa-paint-brush"></i> Creative Art
                </button>
                <button class="category-btn" onclick="selectCourseCategory('academic')" id="academicBtn">
                    <i class="fas fa-graduation-cap"></i> Academic Excellence
                </button>
            </div>
            
            <div id="creativeCourses" class="course-options" style="display: block;">
                <div class="course-grid" id="creativeCourseOptions">
                    <!-- Creative art courses will be populated here -->
                </div>
            </div>
            
            <div id="academicCourses" class="course-options" style="display: none;">
                <div class="course-grid" id="academicCourseOptions">
                    <!-- Academic courses will be populated here -->
                </div>
            </div>
            
            <input type="hidden" id="selectedCourse">
            <input type="hidden" id="selectedCategory">
            
            <div id="courseDetails" style="margin-top: 20px; padding: 15px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h4 id="selectedCourseName" style="margin-bottom: 5px; color: #fff;"></h4>
                        <p id="selectedCourseDesc" style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 0; color: #fff;"></p>
                    </div>
                    <div style="text-align: right;">
                        <div id="selectedCourseDuration" style="font-weight: 600; color: var(--secondary);"></div>
                        <div id="selectedCourseFee" style="font-size: 0.9rem; color: #ffab00;"></div>
                    </div>
                </div>
                <button class="btn btn-sm btn-secondary" onclick="clearCourseSelection()" style="margin-top: 10px;">
                    <i class="fas fa-times"></i> Change Selection
                </button>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Address</label>
            <textarea class="form-textarea" id="studentAddress" placeholder="Complete residential address"></textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">Any Previous Experience</label>
            <textarea class="form-textarea" id="studentExperience" placeholder="Briefly describe any previous art or academic experience"></textarea>
        </div>
        
        <button class="btn btn-primary btn-full" onclick="saveAdmission()">
            <i class="fas fa-paper-plane"></i> Submit Application
        </button>
        
        <p style="text-align: center; margin-top: 20px; opacity: 0.7; font-size: 0.9rem;">
            <i class="fas fa-lock"></i> Your information is secure and will not be shared
        </p>
    </div>
</div>

<!-- CREATIVE ART COURSES PAGE -->
<div id="creativeArtPage" style="display: none;">
    <div class="hero">
        <h1>Creative Art Courses</h1>
        <p>Discover your artistic potential with our comprehensive creative art programs</p>
        <button class="btn btn-primary" onclick="showAdmissionForm()" style="margin-top: 20px;">
            <i class="fas fa-user-plus"></i> Enroll in Creative Art
        </button>
    </div>
    
    <div class="grid" id="creativeCoursesGrid">
        <!-- Creative art courses will be loaded here -->
    </div>
</div>

<!-- ACADEMIC COURSES PAGE -->
<div id="academicPage" style="display: none;">
    <div class="hero">
        <h1>Academic Excellence Programs</h1>
        <p>Excel in academics with our expert guidance and comprehensive coaching</p>
        <button class="btn btn-primary" onclick="showAdmissionForm()" style="margin-top: 20px;">
            <i class="fas fa-user-plus"></i> Enroll in Academic Program
        </button>
    </div>
    
    <div class="grid" id="academicCoursesGrid">
        <!-- Academic courses will be loaded here -->
    </div>
</div>

<!-- EVENTS PAGE -->
<div id="eventsPage" style="display: none;">
    <div class="hero">
        <h1>Upcoming Events & Workshops</h1>
        <p>Join our exciting events, workshops, and competitions</p>
        <button class="btn btn-primary" onclick="showAdmissionForm()" style="margin-top: 20px;">
            <i class="fas fa-calendar-plus"></i> Register for Events
        </button>
    </div>
    
    <div class="grid" id="publicEventsGrid">
        <!-- Events will be loaded here -->
    </div>
</div>

<!-- GALLERY PAGE -->
<div id="galleryPage" style="display: none;">
    <div class="hero">
        <h1>Student Gallery</h1>
        <p>View artwork and achievements from our talented students</p>
        <button class="btn btn-primary" onclick="showAdmissionForm()" style="margin-top: 20px;">
            <i class="fas fa-user-plus"></i> Join Our Creative Community
        </button>
    </div>
    
    <div class="gallery-grid" id="publicGalleryGrid">
        <!-- Gallery images will be loaded here -->
    </div>
</div>

<!-- APPLICATION STATUS CHECK PAGE -->
<div id="statusCheckPage" style="display: none;">
    <div class="hero">
        <h1>Application Status Check</h1>
        <p>Track your admission application status in real-time</p>
    </div>
    
    <div class="form-container slide-up">
        <h2 class="form-title">
            <i class="fas fa-search"></i> Check Application Status
        </h2>
        <p style="text-align: center; margin-bottom: 30px; opacity: 0.8;">
            Enter your Application ID to view your application details and current status
        </p>
        
        <div class="form-group">
            <label class="form-label">Application ID *</label>
            <div style="position: relative;">
                <input type="text" class="form-input" id="applicationId" placeholder="e.g., STU123456789">
                <i class="fas fa-id-card" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); opacity: 0.6;"></i>
            </div>
            <p style="font-size: 0.9rem; margin-top: 8px; opacity: 0.7;">
                <i class="fas fa-info-circle"></i> You can find your Application ID in the confirmation receipt
            </p>
        </div>
        
        <button class="btn btn-primary btn-full" onclick="checkStatus()">
            <i class="fas fa-search"></i> Check Status
        </button>
        
        <div style="text-align: center; margin-top: 25px;">
            <a href="#" style="color: var(--secondary); text-decoration: none; cursor: pointer;" onclick="showHome()">
                <i class="fas fa-arrow-left"></i> Back to Home
            </a>
        </div>
    </div>
    
    <!-- Status Result Display Area -->
    <div id="statusResult" style="max-width: 800px; margin: 40px auto; display: none;">
        <!-- Status result will be displayed here -->
    </div>
</div>

<!-- ADMIN LOGIN -->
<div id="adminLogin" style="display: none;">
    <div class="form-container slide-up">
        <h2 class="form-title">
            <i class="fas fa-lock"></i> Admin Portal
        </h2>
        <p style="text-align: center; margin-bottom: 30px; opacity: 0.8;">
            Secure access to the management dashboard
        </p>
        
        <div class="form-group">
            <label class="form-label">Username</label>
            <div style="position: relative;">
                <input type="text" class="form-input" id="adminUser" placeholder="Enter admin username">
                <i class="fas fa-user" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); opacity: 0.6;"></i>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Password</label>
            <div style="position: relative;">
                <input type="password" class="form-input" id="adminPass" placeholder="Enter password">
                <i class="fas fa-eye toggle-password" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); opacity: 0.6; cursor: pointer;" onclick="togglePassword()"></i>
            </div>
        </div>
        
        <button class="btn btn-primary btn-full" onclick="login()">
            <i class="fas fa-sign-in-alt"></i> Login to Dashboard
        </button>
        
        <div style="text-align: center; margin-top: 25px;">
            <a href="#" style="color: var(--secondary); text-decoration: none; cursor: pointer;" onclick="showHome()">
                <i class="fas fa-arrow-left"></i> Back to Home
            </a>
        </div>
    </div>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" style="display: none;">
    <div class="admin-layout">
        <div class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-user-shield" style="font-size: 1.8rem; color: var(--secondary);"></i>
                <h3>Admin Panel</h3>
            </div>
            
            <div class="sidebar-nav">
                <button class="sidebar-btn active" onclick="showSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                
                <button class="sidebar-btn" onclick="showSection('admissions')">
                    <i class="fas fa-user-graduate"></i> Admissions
                    <span id="admissionsBadge" class="badge">0</span>
                </button>
                
                <button class="sidebar-btn" onclick="showSection('students')">
                    <i class="fas fa-users"></i> Students
                </button>
                
                <button class="sidebar-btn" onclick="showSection('syllabus')">
                    <i class="fas fa-book"></i> Syllabus
                </button>
                
                <button class="sidebar-btn" onclick="showSection('courses')">
                    <i class="fas fa-paint-brush"></i> Courses
                </button>
                
                <button class="sidebar-btn" onclick="showSection('galleryAdmin')">
                    <i class="fas fa-images"></i> Gallery
                </button>
                
                <button class="sidebar-btn" onclick="showSection('events')">
                    <i class="fas fa-calendar-alt"></i> Events
                </button>
                
                <button class="sidebar-btn" onclick="showSection('reports')">
                    <i class="fas fa-chart-bar"></i> Reports
                </button>
                
                <button class="sidebar-btn" onclick="showSection('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
            
            <div style="margin-top: auto; padding-top: 30px;">
                <div class="profile-card" style="background: rgba(255, 255, 255, 0.1); color: white;">
                    <div class="profile-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-name" style="color: white;">Admin User</div>
                    <div class="profile-role" style="color: var(--secondary);">System Administrator</div>
                    <button class="btn btn-danger btn-full" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>
        
        <div class="admin-main">
            <!-- DASHBOARD SECTION -->
            <section id="dashboard">
                <div class="section-header">
                    <h2 class="section-title">Dashboard Overview</h2>
                    <div class="search-bar">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" placeholder="Search dashboard...">
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalAdmissions">0</div>
                        <div class="stat-label">Total Admissions</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> 12% this month
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="activeStudents">0</div>
                        <div class="stat-label">Active Students</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> 8% this month
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="totalCourses">0</div>
                        <div class="stat-label">Courses Offered</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> 3 new this quarter
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="revenue">0</div>
                        <div class="stat-label">Monthly Revenue</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> 15% growth
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-top: 40px;">
                    <div>
                        <h3 style="color: var(--dark); margin-bottom: 20px;">Admissions Trend</h3>
                        <canvas id="admissionsChart" height="250"></canvas>
                    </div>
                    
                    <div>
                        <h3 style="color: var(--dark); margin-bottom: 20px;">Course Distribution</h3>
                        <canvas id="coursesChart" height="250"></canvas>
                    </div>
                </div>
                
                <div style="margin-top: 40px;">
                    <h3 style="color: var(--dark); margin-bottom: 20px;">Recent Admissions</h3>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>Course</th>
                                    <th>Category</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Payment</th>
                                </tr>
                            </thead>
                            <tbody id="recentAdmissions">
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- ADMISSIONS SECTION -->
            <section id="admissions" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Admission Management</h2>
                    <button class="btn btn-primary" onclick="exportAdmissions()">
                        <i class="fas fa-download"></i> Export Data
                    </button>
                </div>
                
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('pendingTab')">Pending</button>
                    <button class="tab-btn" onclick="switchTab('approvedTab')">Approved</button>
                    <button class="tab-btn" onclick="switchTab('rejectedTab')">Rejected</button>
                    <button class="tab-btn" onclick="switchTab('allTab')">All Applications</button>
                </div>
                
                <div class="tab-content active" id="pendingTab">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>Course</th>
                                    <th>Category</th>
                                    <th>Applied On</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pendingAdmissions">
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="tab-content" id="approvedTab">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>Course</th>
                                    <th>Category</th>
                                    <th>Approved On</th>
                                    <th>Payment Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="approvedAdmissions">
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="tab-content" id="rejectedTab">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>Course</th>
                                    <th>Category</th>
                                    <th>Rejected On</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="rejectedAdmissions">
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="tab-content" id="allTab">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>Course</th>
                                    <th>Category</th>
                                    <th>Status</th>
                                    <th>Payment</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="allAdmissions">
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- STUDENTS SECTION -->
            <section id="students" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Student Management</h2>
                    <button class="btn btn-primary" onclick="openAddStudentModal()">
                        <i class="fas fa-plus"></i> Add Student
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Name</th>
                                <th>Class</th>
                                <th>Course</th>
                                <th>Category</th>
                                <th>Join Date</th>
                                <th>Fees Status</th>
                                <th>Performance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="studentsData">
                            <!-- Will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- SYLLABUS SECTION -->
            <section id="syllabus" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Syllabus Management</h2>
                    <button class="btn btn-primary" onclick="openAddSyllabusModal()">
                        <i class="fas fa-plus"></i> Add Syllabus
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Class</th>
                                <th>Subject</th>
                                <th>Syllabus</th>
                                <th>Last Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="syllabusData">
                            <!-- Will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- COURSES SECTION -->
            <section id="courses" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Course Management</h2>
                    <button class="btn btn-primary" onclick="openAddCourseModal()">
                        <i class="fas fa-plus"></i> Add Course
                    </button>
                </div>
                
                <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); padding: 0; gap: 20px;" id="adminCoursesGrid">
                    <!-- Course cards will be populated dynamically -->
                </div>
            </section>
            
            <!-- GALLERY SECTION -->
            <section id="galleryAdmin" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Gallery Management</h2>
                    <div class="file-upload" onclick="document.getElementById('galleryUpload').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload images or drag and drop</p>
                        <p style="font-size: 0.9rem; opacity: 0.7;">PNG, JPG, GIF up to 5MB</p>
                        <input type="file" id="galleryUpload" accept="image/*" multiple onchange="uploadGalleryImages(event)" style="display: none;">
                    </div>
                </div>
                
                <div class="gallery-grid" id="adminGallery">
                    <!-- Gallery images will be populated dynamically -->
                </div>
            </section>
            
            <!-- EVENTS SECTION -->
            <section id="events" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Event Management</h2>
                    <button class="btn btn-primary" onclick="openAddEventModal()">
                        <i class="fas fa-plus"></i> Add Event
                    </button>
                </div>
                
                <div class="calendar-widget">
                    <div class="calendar-header">
                        <h3>Event Calendar</h3>
                        <div>
                            <button class="btn btn-sm btn-secondary" onclick="prevMonth()">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span id="currentMonth" style="margin: 0 15px; font-weight: 600;">January 2024</span>
                            <button class="btn btn-sm btn-secondary" onclick="nextMonth()">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    <div class="calendar-grid" id="calendar">
                        <!-- Calendar will be populated dynamically -->
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3 style="color: var(--dark); margin-bottom: 20px;">Upcoming Events</h3>
                    <div id="upcomingEvents">
                        <!-- Events will be populated dynamically -->
                    </div>
                </div>
            </section>
            
            <!-- REPORTS SECTION -->
            <section id="reports" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Analytics & Reports</h2>
                    <div>
                        <select class="form-select" id="reportPeriod" style="width: 200px; display: inline-block; margin-right: 15px; background: white; color: var(--dark);">
                            <option value="7">Last 7 Days</option>
                            <option value="30">Last 30 Days</option>
                            <option value="90">Last Quarter</option>
                            <option value="365">Last Year</option>
                        </select>
                        <button class="btn btn-primary" onclick="generateReport()">
                            <i class="fas fa-file-pdf"></i> Generate PDF
                        </button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
                    <div>
                        <h3 style="color: var(--dark); margin-bottom: 20px;">Revenue Trend</h3>
                        <canvas id="revenueChart" height="300"></canvas>
                    </div>
                    
                    <div>
                        <h3 style="color: var(--dark); margin-bottom: 20px;">Student Growth</h3>
                        <canvas id="growthChart" height="300"></canvas>
                    </div>
                </div>
                
                <div style="margin-top: 40px;">
                    <h3 style="color: var(--dark); margin-bottom: 20px;">Performance Metrics</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="avgAttendance">0%</div>
                            <div class="stat-label">Average Attendance</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-value" id="completionRate">0%</div>
                            <div class="stat-label">Course Completion</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-value" id="satisfaction">0%</div>
                            <div class="stat-label">Student Satisfaction</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-value" id="retentionRate">0%</div>
                            <div class="stat-label">Retention Rate</div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- SETTINGS SECTION -->
            <section id="settings" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">System Settings</h2>
                </div>
                
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('generalTab')">General</button>
                    <button class="tab-btn" onclick="switchTab('paymentTab')">Payment</button>
                    <button class="tab-btn" onclick="switchTab('notificationTab')">Notifications</button>
                    <button class="tab-btn" onclick="switchTab('backupTab')">Backup</button>
                </div>
                
                <div class="tab-content active" id="generalTab">
                    <div class="form-container" style="max-width: 100%; background: white; color: var(--dark); border: 1px solid #e0e0e0;">
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">Institute Name</label>
                            <input type="text" class="form-input" id="instituteName" value="ART ZONE PRO" style="color: #333; background: #f8f9fa; border: 1px solid #ddd;">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">Contact Email</label>
                            <input type="email" class="form-input" id="contactEmail" value="info@artzonepro.com" style="color: #333; background: #f8f9fa; border: 1px solid #ddd;">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">Contact Phone</label>
                            <input type="tel" class="form-input" id="contactPhone" value="+91 9876543210" style="color: #333; background: #f8f9fa; border: 1px solid #ddd;">
                        </div>
                        
                        <button class="btn btn-primary" onclick="saveSettings()">Save Changes</button>
                    </div>
                </div>
                
                <div class="tab-content" id="paymentTab">
                    <div class="form-container" style="max-width: 100%; background: white; color: var(--dark); border: 1px solid #e0e0e0;">
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">Payment Gateway</label>
                            <select class="form-select" id="paymentGateway" style="color: #333; background: #f8f9fa; border: 1px solid #ddd;">
                                <option value="razorpay">Razorpay</option>
                                <option value="paypal">PayPal</option>
                                <option value="stripe">Stripe</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">Currency</label>
                            <select class="form-select" id="currency" style="color: #333; background: #f8f9fa; border: 1px solid #ddd;">
                                <option value="INR">Indian Rupee ()</option>
                                <option value="USD">US Dollar ($)</option>
                                <option value="EUR">Euro ()</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-primary" onclick="savePaymentSettings()">Save Payment Settings</button>
                    </div>
                </div>
                
                <div class="tab-content" id="notificationTab">
                    <div class="form-container" style="max-width: 100%; background: white; color: var(--dark); border: 1px solid #e0e0e0;">
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">Email Notifications</label>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="emailNotifications" checked>
                                <span>Send email notifications for new admissions</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">SMS Notifications</label>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="smsNotifications">
                                <span>Send SMS notifications for payment reminders</span>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" onclick="saveNotificationSettings()">Save Notification Settings</button>
                    </div>
                </div>
                
                <div class="tab-content" id="backupTab">
                    <div class="form-container" style="max-width: 100%; background: white; color: var(--dark); border: 1px solid #e0e0e0;">
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">Automatic Backups</label>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="autoBackup" checked>
                                <span>Enable automatic daily backups</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" style="color: #333;">Backup Frequency</label>
                            <select class="form-select" id="backupFrequency" style="color: #333; background: #f8f9fa; border: 1px solid #ddd;">
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-primary" style="margin-right: 10px;" onclick="createBackup()">Create Backup Now</button>
                        <button class="btn btn-secondary" onclick="restoreBackup()">Restore from Backup</button>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<!-- MODALS -->
<!-- Add Student Modal -->
<div class="modal" id="addStudentModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Add New Student</h3>
            <button class="modal-close" onclick="closeModal('addStudentModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-container" style="max-width: 100%; background: transparent;">
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Full Name *</label>
                    <input type="text" class="form-input" id="newStudentName" placeholder="Enter student name" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Class *</label>
                    <select class="form-select" id="newStudentClass" style="color: var(--dark); background: white;">
                        <option value="">Select Class</option>
                        <option>Class 1-5</option>
                        <option>Class 6-8</option>
                        <option>Class 9-10</option>
                        <option>Class 11-12</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Course *</label>
                    <input type="text" class="form-input" id="newStudentCourse" placeholder="Enter course name" style="color: var(--dark); background: white;">
                </div>
                
                <button class="btn btn-primary btn-full" onclick="addNewStudent()">
                    <i class="fas fa-save"></i> Save Student
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Add Syllabus Modal -->
<div class="modal" id="addSyllabusModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Add New Syllabus</h3>
            <button class="modal-close" onclick="closeModal('addSyllabusModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-container" style="max-width: 100%; background: transparent;">
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Class *</label>
                    <input type="text" class="form-input" id="newSyllabusClass" placeholder="e.g., Class 9-10" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Subject *</label>
                    <input type="text" class="form-input" id="newSyllabusSubject" placeholder="e.g., Mathematics" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Syllabus Details *</label>
                    <textarea class="form-textarea" id="newSyllabusDetails" placeholder="Enter syllabus content" rows="4" style="color: var(--dark); background: white;"></textarea>
                </div>
                
                <button class="btn btn-primary btn-full" onclick="addNewSyllabus()">
                    <i class="fas fa-save"></i> Save Syllabus
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Syllabus Modal -->
<div class="modal" id="editSyllabusModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Edit Syllabus</h3>
            <button class="modal-close" onclick="closeModal('editSyllabusModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-container" style="max-width: 100%; background: transparent;">
                <input type="hidden" id="editOriginalClass">
                <input type="hidden" id="editOriginalSubject">
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Class *</label>
                    <input type="text" class="form-input" id="editSyllabusClass" placeholder="e.g., Class 9-10" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Subject *</label>
                    <input type="text" class="form-input" id="editSyllabusSubject" placeholder="e.g., Mathematics" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Syllabus Details *</label>
                    <textarea class="form-textarea" id="editSyllabusDetails" placeholder="Enter syllabus content" rows="4" style="color: var(--dark); background: white;"></textarea>
                </div>
                
                <button class="btn btn-primary btn-full" onclick="updateSyllabus()">
                    <i class="fas fa-save"></i> Update Syllabus
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Add Course Modal -->
<div class="modal" id="addCourseModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Add New Course</h3>
            <button class="modal-close" onclick="closeModal('addCourseModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-container" style="max-width: 100%; background: transparent;">
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Course Name *</label>
                    <input type="text" class="form-input" id="newCourseName" placeholder="Enter course name" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Category *</label>
                    <select class="form-select" id="newCourseCategory" style="color: var(--dark); background: white;">
                        <option value="">Select Category</option>
                        <option value="Creative Art">Creative Art</option>
                        <option value="Academic Excellence">Academic Excellence</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Description *</label>
                    <textarea class="form-textarea" id="newCourseDescription" placeholder="Enter course description" rows="3" style="color: var(--dark); background: white;"></textarea>
                </div>
                
                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label" style="color: var(--dark);">Duration *</label>
                        <input type="text" class="form-input" id="newCourseDuration" placeholder="e.g., 3 Months" style="color: var(--dark); background: white;">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" style="color: var(--dark);">Course Fee *</label>
                        <input type="text" class="form-input" id="newCourseFee" placeholder="e.g., 5,000" style="color: var(--dark); background: white;">
                    </div>
                </div>
                
                <button class="btn btn-primary btn-full" onclick="addNewCourse()">
                    <i class="fas fa-save"></i> Save Course
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Add Event Modal -->
<div class="modal" id="addEventModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Add New Event</h3>
            <button class="modal-close" onclick="closeModal('addEventModal')"></button>
        </div>
        <div class="modal-body">
            <div class="form-container" style="max-width: 100%; background: transparent;">
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Event Title *</label>
                    <input type="text" class="form-input" id="newEventTitle" placeholder="Enter event title" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Event Date *</label>
                    <input type="date" class="form-input" id="newEventDate" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Event Type</label>
                    <select class="form-select" id="newEventType" style="color: var(--dark); background: white;">
                        <option value="Workshop">Workshop</option>
                        <option value="Exhibition">Exhibition</option>
                        <option value="Competition">Competition</option>
                        <option value="Meeting">Meeting</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Description</label>
                    <textarea class="form-textarea" id="newEventDescription" placeholder="Enter event description" rows="3" style="color: var(--dark); background: white;"></textarea>
                </div>
                
                <button class="btn btn-primary btn-full" onclick="addNewEvent()">
                    <i class="fas fa-save"></i> Save Event
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Payment Management Modal -->
<div class="modal" id="paymentModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Payment Management</h3>
            <button class="modal-close" onclick="closeModal('paymentModal')"></button>
        </div>
        <div class="modal-body">
            <div id="paymentDetails" style="margin-bottom: 30px;">
                <!-- Payment details will be loaded here -->
            </div>
            
            <div class="form-container" style="max-width: 100%; background: #f8f9fa; padding: 20px; border-radius: 10px;">
                <h4 style="color: var(--dark); margin-bottom: 20px; text-align: center;">
                    <i class="fas fa-rupee-sign"></i> Record New Payment
                </h4>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Payment Date *</label>
                    <input type="date" class="form-input" id="paymentDate" style="color: var(--dark); background: white;" value="${new Date().toISOString().split('T')[0]}">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Amount () *</label>
                    <input type="number" class="form-input" id="paymentAmount" placeholder="Enter payment amount" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Payment Method *</label>
                    <select class="form-select" id="paymentMethod" style="color: var(--dark); background: white;">
                        <option value="cash">Cash</option>
                        <option value="cheque">Cheque</option>
                        <option value="online">Online Transfer</option>
                        <option value="card">Card</option>
                        <option value="upi">UPI</option>
                    </select>
                </div>
                
                <div class="form-group" id="chequeDetails" style="display: none;">
                    <label class="form-label" style="color: var(--dark);">Cheque Number</label>
                    <input type="text" class="form-input" id="chequeNumber" placeholder="Enter cheque number" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group" id="transactionDetails" style="display: none;">
                    <label class="form-label" style="color: var(--dark);">Transaction ID/Reference</label>
                    <input type="text" class="form-input" id="transactionId" placeholder="Enter transaction reference" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Payment Received By</label>
                    <input type="text" class="form-input" id="receivedBy" value="Admin" style="color: var(--dark); background: white;">
                </div>
                
                <div class="form-group">
                    <label class="form-label" style="color: var(--dark);">Notes</label>
                    <textarea class="form-textarea" id="paymentNotes" placeholder="Any additional notes" rows="2" style="color: var(--dark); background: white;"></textarea>
                </div>
                
                <button class="btn btn-primary btn-full" onclick="recordPayment()">
                    <i class="fas fa-check-circle"></i> Record Payment
                </button>
                
                <button class="btn btn-secondary btn-full" style="margin-top: 10px;" onclick="printPaymentReceipt()">
                    <i class="fas fa-print"></i> Print Receipt
                </button>
            </div>
            
            <div id="paymentHistory" style="margin-top: 30px;">
                <!-- Payment history will be loaded here -->
            </div>
        </div>
    </div>
</div>

<!-- IMAGE POPUP MODAL -->
<div class="modal" id="imgPopup">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Image Preview</h3>
            <button class="modal-close" onclick="closeModal('imgPopup')"></button>
        </div>
        <div class="modal-body">
            <img id="popupImg" style="width: 100%; border-radius: 10px;">
        </div>
    </div>
</div>

<!-- ADMISSION RECEIPT MODAL -->
<div class="modal" id="receiptModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Admission Confirmation</h3>
            <button class="modal-close" onclick="closeModal('receiptModal')"></button>
        </div>
        <div class="modal-body">
            <div id="receiptContent" style="color: var(--dark);">
                <!-- Receipt content will be loaded here -->
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="printReceipt()">
                    <i class="fas fa-print"></i> Print Receipt
                </button>
                <button class="btn btn-secondary" onclick="downloadReceipt()" style="margin-left: 15px;">
                    <i class="fas fa-download"></i> Download PDF
                </button>
            </div>
        </div>
    </div>
</div>

<!-- NOTIFICATION -->
<div class="notification" id="notification">
    <i class="fas fa-check-circle" id="notificationIcon"></i>
    <div>
        <div id="notificationTitle">Success!</div>
        <div id="notificationMessage">Operation completed successfully.</div>
    </div>
</div>

<script>
// ==================== GLOBAL VARIABLES ====================
let isAdminLoggedIn = false;
let dashboardChart, admissionsChart, coursesChart, revenueChart, growthChart;
let currentSection = 'dashboard';
let currentMonth = new Date().getMonth();
let currentYear = new Date().getFullYear();
let currentPaymentAdmission = null;
let currentReceiptContent = null;

// ==================== COURSE DATA ====================
const coursesData = {
    'Drawing Fundamentals': {
        description: 'Learn basic to advanced drawing techniques',
        duration: '3 Months',
        category: 'Creative Art',
        fee: '5,000'
    },
    'Oil Painting Masterclass': {
        description: 'Master oil painting with expert guidance',
        duration: '6 Months',
        category: 'Creative Art',
        fee: '12,000'
    },
    'Watercolor Workshop': {
        description: 'Master watercolor techniques and styles',
        duration: '2 Months',
        category: 'Creative Art',
        fee: '4,000'
    },
    'Digital Art & Design': {
        description: 'Adobe Creative Suite training for digital art',
        duration: '4 Months',
        category: 'Creative Art',
        fee: '8,000'
    },
    'Portrait Drawing': {
        description: 'Specialized portrait drawing techniques',
        duration: '3 Months',
        category: 'Creative Art',
        fee: '6,000'
    },
    'Landscape Painting': {
        description: 'Outdoor and indoor landscape art creation',
        duration: '3 Months',
        category: 'Creative Art',
        fee: '5,500'
    },
    'Abstract Art': {
        description: 'Modern abstract art creation and theory',
        duration: '2 Months',
        category: 'Creative Art',
        fee: '4,500'
    },
    'Sculpture & 3D Art': {
        description: '3D art and sculpture making techniques',
        duration: '4 Months',
        category: 'Creative Art',
        fee: '9,000'
    },
    'Foundation Course (Class 1-5)': {
        description: 'Complete academic support for classes 1-5',
        duration: '10 Months',
        category: 'Academic Excellence',
        fee: '15,000'
    },
    'Middle School (Class 6-8)': {
        description: 'Focused coaching for middle school curriculum',
        duration: '10 Months',
        category: 'Academic Excellence',
        fee: '18,000'
    },
    'Board Preparation (Class 9-10)': {
        description: 'Complete board exam preparation',
        duration: '10 Months',
        category: 'Academic Excellence',
        fee: '22,000'
    },
    'Science Stream (11-12)': {
        description: 'Physics, Chemistry, Biology, Mathematics',
        duration: '10 Months',
        category: 'Academic Excellence',
        fee: '28,000'
    },
    'Commerce Stream (11-12)': {
        description: 'Accountancy, Business Studies, Economics',
        duration: '10 Months',
        category: 'Academic Excellence',
        fee: '26,000'
    },
    'Competitive Exams Prep': {
        description: 'Preparation for various competitive exams',
        duration: '12 Months',
        category: 'Academic Excellence',
        fee: '30,000'
    }
};

// ==================== INITIALIZATION ====================
document.addEventListener('DOMContentLoaded', function() {
    init();
});

function init() {
    // Initialize localStorage data
    if (!localStorage.getItem('admissions')) localStorage.setItem('admissions', JSON.stringify([]));
    if (!localStorage.getItem('students')) localStorage.setItem('students', JSON.stringify([]));
    if (!localStorage.getItem('syllabus')) localStorage.setItem('syllabus', JSON.stringify({}));
    if (!localStorage.getItem('gallery')) {
        localStorage.setItem('gallery', JSON.stringify([
            'https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1544717305-2782549b5136?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=300&fit=crop'
        ]));
    }
    if (!localStorage.getItem('events')) {
        localStorage.setItem('events', JSON.stringify([
            {
                title: 'Annual Art Exhibition',
                date: new Date(new Date().setDate(new Date().getDate() + 7)).toISOString().split('T')[0],
                description: 'Showcasing student artwork from all courses',
                type: 'Exhibition'
            },
            {
                title: 'Summer Workshop: Watercolor',
                date: new Date(new Date().setDate(new Date().getDate() + 14)).toISOString().split('T')[0],
                description: '5-day intensive watercolor workshop',
                type: 'Workshop'
            },
            {
                title: 'Parent-Teacher Meeting',
                date: new Date(new Date().setDate(new Date().getDate() + 21)).toISOString().split('T')[0],
                description: 'Discuss student progress and feedback',
                type: 'Meeting'
            }
        ]));
    }
    
    // Initialize course selection
    loadCoursesForSelection();
    selectCourseCategory('creative');
    
    // Show home page
    showHome();
    
    // Check for saved admin session
    if (localStorage.getItem('adminLoggedIn') === 'true') {
        isAdminLoggedIn = true;
        showAdminPanel();
    }
}

// ==================== NAVIGATION FUNCTIONS ====================
function toggleMobileMenu() {
    const navLinks = document.getElementById('navLinks');
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    navLinks.classList.toggle('active');
    mobileMenuBtn.innerHTML = navLinks.classList.contains('active') ? 
        '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
}

function hideAll() {
    document.getElementById('home').style.display = 'none';
    document.getElementById('creativeArtPage').style.display = 'none';
    document.getElementById('academicPage').style.display = 'none';
    document.getElementById('eventsPage').style.display = 'none';
    document.getElementById('galleryPage').style.display = 'none';
    document.getElementById('adminLogin').style.display = 'none';
    document.getElementById('adminPanel').style.display = 'none';
    document.getElementById('statusCheckPage').style.display = 'none';
    document.getElementById('admissionForm').style.display = 'none';
    
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
    });
}

function showHome() {
    hideAll();
    document.getElementById('home').style.display = 'block';
    document.querySelectorAll('.nav-link')[0].classList.add('active');
    closeMobileMenu();
}

function showCreativeArt() {
    hideAll();
    document.getElementById('creativeArtPage').style.display = 'block';
    document.querySelectorAll('.nav-link')[1].classList.add('active');
    loadCreativeArtCourses();
    closeMobileMenu();
}

function showAcademic() {
    hideAll();
    document.getElementById('academicPage').style.display = 'block';
    document.querySelectorAll('.nav-link')[2].classList.add('active');
    loadAcademicCourses();
    closeMobileMenu();
}

function showEvents() {
    hideAll();
    document.getElementById('eventsPage').style.display = 'block';
    document.querySelectorAll('.nav-link')[3].classList.add('active');
    loadPublicEvents();
    closeMobileMenu();
}

function showGallery() {
    hideAll();
    document.getElementById('galleryPage').style.display = 'block';
    document.querySelectorAll('.nav-link')[4].classList.add('active');
    loadPublicGallery();
    closeMobileMenu();
}

function showStatusCheck() {
    hideAll();
    document.getElementById('statusCheckPage').style.display = 'block';
    document.querySelectorAll('.nav-link')[5].classList.add('active');
    closeMobileMenu();
}

function showAdminLogin() {
    hideAll();
    document.getElementById('adminLogin').style.display = 'block';
    document.querySelectorAll('.nav-link')[6].classList.add('active');
    closeMobileMenu();
}

function showAdminPanel() {
    hideAll();
    document.getElementById('adminPanel').style.display = 'block';
    showSection('dashboard');
}

function closeMobileMenu() {
    const navLinks = document.getElementById('navLinks');
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    if (navLinks.classList.contains('active')) {
        navLinks.classList.remove('active');
        mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
    }
}

// ==================== NOTIFICATION SYSTEM ====================
function showNotification(type, title, message) {
    const notification = document.getElementById('notification');
    const icon = document.getElementById('notificationIcon');
    const notificationTitle = document.getElementById('notificationTitle');
    const notificationMessage = document.getElementById('notificationMessage');
    
    notification.className = 'notification';
    notification.classList.add(type);
    
    switch(type) {
        case 'success':
            icon.className = 'fas fa-check-circle';
            break;
        case 'error':
            icon.className = 'fas fa-exclamation-circle';
            break;
        case 'info':
            icon.className = 'fas fa-info-circle';
            break;
    }
    
    notificationTitle.textContent = title;
    notificationMessage.textContent = message;
    
    notification.classList.add('active');
    
    setTimeout(() => {
        notification.classList.remove('active');
    }, 3000);
}

// ==================== ADMISSION FORM FUNCTIONS ====================
function showAdmissionForm() {
    const admissionForm = document.getElementById('admissionForm');
    admissionForm.style.display = 'block';
    window.scrollTo({
        top: admissionForm.offsetTop - 100,
        behavior: 'smooth'
    });
}

function loadCoursesForSelection() {
    const creativeOptions = document.getElementById('creativeCourseOptions');
    const academicOptions = document.getElementById('academicCourseOptions');
    
    creativeOptions.innerHTML = '';
    academicOptions.innerHTML = '';
    
    Object.keys(coursesData).forEach(courseName => {
        const course = coursesData[courseName];
        const badge = document.createElement('div');
        badge.className = 'course-badge';
        badge.innerHTML = `
            <i class="${course.category === 'Creative Art' ? 'fas fa-paint-brush' : 'fas fa-graduation-cap'}"></i>
            <div>${courseName}</div>
        `;
        badge.onclick = function() {
            selectCourse(courseName, course.category === 'Creative Art' ? 'creative' : 'academic', course);
        };
        
        if (course.category === 'Creative Art') {
            creativeOptions.appendChild(badge);
        } else {
            academicOptions.appendChild(badge);
        }
    });
}

function selectCourseCategory(category) {
    document.getElementById('creativeBtn').classList.remove('active');
    document.getElementById('academicBtn').classList.remove('active');
    document.getElementById(`${category}Btn`).classList.add('active');
    
    document.querySelectorAll('.course-options').forEach(option => {
        option.style.display = 'none';
    });
    
    document.getElementById(`${category}Courses`).style.display = 'block';
    clearCourseSelection();
    document.getElementById('selectedCategory').value = category;
}

function selectCourse(courseName, category, courseDetails) {
    clearCourseSelection();
    event.currentTarget.classList.add('selected');
    
    document.getElementById('selectedCourse').value = courseName;
    document.getElementById('selectedCategory').value = category;
    
    const detailsDiv = document.getElementById('courseDetails');
    document.getElementById('selectedCourseName').textContent = courseName;
    document.getElementById('selectedCourseDesc').textContent = courseDetails.description;
    document.getElementById('selectedCourseDuration').textContent = courseDetails.duration;
    document.getElementById('selectedCourseFee').textContent = courseDetails.fee;
    detailsDiv.style.display = 'block';
    
    detailsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function clearCourseSelection() {
    document.querySelectorAll('.course-badge').forEach(badge => {
        badge.classList.remove('selected');
    });
    
    document.getElementById('selectedCourse').value = '';
    document.getElementById('selectedCategory').value = '';
    document.getElementById('courseDetails').style.display = 'none';
}

function saveAdmission() {
    const name = document.getElementById('studentName').value.trim();
    const studentClass = document.getElementById('studentClass').value;
    const course = document.getElementById('selectedCourse').value;
    const category = document.getElementById('selectedCategory').value;
    
    if (!name || !studentClass || !course || !category) {
        showNotification('error', 'Error', 'Please fill all required fields');
        return;
    }
    
    // Generate ID - this will be both Application ID and Student ID
    const studentId = 'STU' + Date.now().toString().slice(-8);
    
    const admission = {
        id: studentId, // This is both Application ID and Student ID
        name: name,
        class: studentClass,
        course: course,
        category: category,
        mobile: document.getElementById('studentMobile').value.trim(),
        email: document.getElementById('studentEmail').value.trim(),
        dob: document.getElementById('studentDOB').value,
        address: document.getElementById('studentAddress').value.trim(),
        experience: document.getElementById('studentExperience').value.trim(),
        date: new Date().toISOString().split('T')[0],
        status: 'pending',
        payment: {
            status: 'unpaid',
            totalAmount: getCourseFee(course, category),
            paidAmount: 0,
            pendingAmount: getCourseFee(course, category),
            transactions: []
        }
    };
    
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    admissions.push(admission);
    localStorage.setItem('admissions', JSON.stringify(admissions));
    
    showNotification('success', 'Success', 'Application submitted successfully!');
    showReceipt(admission);
    
    // Clear form
    document.getElementById('studentName').value = '';
    document.getElementById('studentClass').value = '';
    document.getElementById('studentMobile').value = '';
    document.getElementById('studentEmail').value = '';
    document.getElementById('studentDOB').value = '';
    document.getElementById('studentAddress').value = '';
    document.getElementById('studentExperience').value = '';
    clearCourseSelection();
    
    document.getElementById('admissionForm').style.display = 'none';
}

function getCourseFee(courseName, category) {
    const course = coursesData[courseName];
    if (course) {
        const feeStr = course.fee.replace(/[^0-9]/g, '');
        return parseInt(feeStr) || 5000;
    }
    return category === 'creative' ? 5000 : 15000;
}

// ==================== RECEIPT FUNCTIONS ====================
function showReceipt(admission) {
    const receiptContent = document.getElementById('receiptContent');
    const categoryName = admission.category === 'creative' ? 'Creative Art' : 'Academic Excellence';
    
    receiptContent.innerHTML = `
        <div style="text-align: center; margin-bottom: 30px;">
            <h2 style="color: var(--primary);">Art Zone Pro</h2>
            <p>Admission Confirmation Receipt</p>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                <div>
                    <strong>Application/Student ID:</strong><br>
                    <span style="font-size: 1.2rem; color: var(--primary);">${admission.id}</span>
                </div>
                <div style="text-align: right;">
                    <strong>Date:</strong><br>
                    ${new Date(admission.date).toLocaleDateString('en-IN')}
                </div>
            </div>
            
            <div style="border-top: 2px dashed #ddd; padding-top: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <div><strong>Student Name:</strong></div>
                    <div>${admission.name}</div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <div><strong>Class/Grade:</strong></div>
                    <div>${admission.class}</div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <div><strong>Course:</strong></div>
                    <div>${admission.course}</div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <div><strong>Category:</strong></div>
                    <div>${categoryName}</div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <div><strong>Course Fee:</strong></div>
                    <div style="color: var(--primary); font-weight: 600;">${admission.payment.totalAmount.toLocaleString('en-IN')}</div>
                </div>
            </div>
        </div>
        
        <div style="padding: 15px; background: rgba(0, 123, 255, 0.1); border-radius: 8px; border-left: 4px solid var(--primary);">
            <p style="margin: 0; color: var(--primary);">
                <i class="fas fa-info-circle"></i> 
                Your application has been submitted successfully. You can check the status using your Application/Student ID.
            </p>
        </div>
        
        <div style="margin-top: 20px; text-align: center; color: #666; font-size: 0.9rem;">
            <p>Please keep this receipt for future reference.</p>
            <p>This ID serves as both Application ID and Student ID.</p>
            <p>Contact: +91 9876543210 | Email: info@artzonepro.com</p>
        </div>
    `;
    
    openModal('receiptModal');
}

function printReceipt() {
    const printContent = document.getElementById('receiptContent').innerHTML;
    const originalContent = document.body.innerHTML;
    
    document.body.innerHTML = `
        <html>
            <head>
                <title>Print Receipt</title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    @media print {
                        body { padding: 0; }
                        .no-print { display: none; }
                    }
                </style>
            </head>
            <body>
                ${printContent}
                <div class="no-print" style="text-align: center; margin-top: 20px;">
                    <button onclick="window.print()">Print</button>
                    <button onclick="window.close()">Close</button>
                </div>
            </body>
        </html>
    `;
    
    window.print();
    document.body.innerHTML = originalContent;
    window.location.reload();
}

function downloadReceipt() {
    showNotification('info', 'Info', 'PDF download would be implemented in production');
}

// ==================== STATUS CHECK FUNCTIONS ====================
function checkApplicationStatus() {
    const applicationId = document.getElementById('statusCheckInput').value.trim();
    
    if (!applicationId) {
        showNotification('error', 'Error', 'Please enter your Application ID');
        return;
    }
    
    showStatusCheck();
    document.getElementById('applicationId').value = applicationId;
    checkStatus();
}

function checkStatus() {
    const applicationId = document.getElementById('applicationId').value.trim();
    const statusResult = document.getElementById('statusResult');
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const students = JSON.parse(localStorage.getItem('students')) || [];
    const application = admissions.find(app => app.id === applicationId);
    
    if (!application) {
        statusResult.innerHTML = `
            <div class="status-card" style="text-align: center;">
                <h3 style="color: var(--danger);">Application/Student Not Found</h3>
                <p>No application or student found with ID: <strong>${applicationId}</strong></p>
                <p style="margin-top: 15px; color: #666;">Please check your Application/Student ID and try again.</p>
                <div style="margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="showHome()">
                        <i class="fas fa-home"></i> Back to Home
                    </button>
                </div>
            </div>
        `;
        statusResult.style.display = 'block';
        return;
    }
    
    const categoryName = application.category === 'creative' ? 'Creative Art' : 'Academic Excellence';
    const statusClass = getStatusClass(application.status);
    const payment = application.payment || {
        status: 'unpaid',
        totalAmount: getCourseFee(application.course, application.category),
        paidAmount: 0,
        pendingAmount: getCourseFee(application.course, application.category),
        transactions: []
    };
    
    statusResult.innerHTML = `
        <div class="status-card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3>Application Status</h3>
                <span class="status-indicator ${statusClass}">
                    <i class="${statusClass === 'status-approved' ? 'fas fa-check-circle' : 
                              statusClass === 'status-rejected' ? 'fas fa-times-circle' : 'fas fa-clock'}"></i> 
                    ${application.status}
                </span>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Application/Student ID:</div>
                <div class="status-detail-value">${application.id}</div>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Student Name:</div>
                <div class="status-detail-value">${application.name}</div>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Class/Grade:</div>
                <div class="status-detail-value">${application.class}</div>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Course Category:</div>
                <div class="status-detail-value">${categoryName}</div>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Selected Course:</div>
                <div class="status-detail-value">${application.course}</div>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Course Fee:</div>
                <div class="status-detail-value">${payment.totalAmount.toLocaleString('en-IN')}</div>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Amount Paid:</div>
                <div class="status-detail-value" style="color: var(--success);">${payment.paidAmount.toLocaleString('en-IN')}</div>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Pending Amount:</div>
                <div class="status-detail-value" style="color: ${payment.pendingAmount > 0 ? 'var(--warning)' : 'var(--success)'};">${payment.pendingAmount.toLocaleString('en-IN')}</div>
            </div>
            
            <div class="status-detail">
                <div class="status-detail-label">Application Date:</div>
                <div class="status-detail-value">${new Date(application.date).toLocaleDateString('en-IN')}</div>
            </div>
            
            ${application.status === 'pending' ? `
            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 193, 7, 0.1); border-radius: 8px; border-left: 4px solid var(--warning);">
                <p style="color: #856404; margin: 0;">
                    <i class="fas fa-info-circle"></i> 
                    Your application is under review. You will receive an update within 3-5 working days.
                </p>
            </div>
            ` : ''}
            
            ${application.status === 'approved' && payment.status === 'unpaid' ? `
            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 152, 0, 0.1); border-radius: 8px; border-left: 4px solid var(--warning);">
                <p style="color: #856404; margin: 0;">
                    <i class="fas fa-exclamation-circle"></i> 
                    Your application is approved! Please complete the payment to confirm your admission.
                </p>
            </div>
            ` : ''}
        </div>
    `;
    statusResult.style.display = 'block';
}

// ==================== ADMIN FUNCTIONS ====================
function togglePassword() {
    const passwordInput = document.getElementById('adminPass');
    const toggleIcon = document.querySelector('.toggle-password');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.className = 'fas fa-eye-slash toggle-password';
    } else {
        passwordInput.type = 'password';
        toggleIcon.className = 'fas fa-eye toggle-password';
    }
}

function login() {
    const username = document.getElementById('adminUser').value;
    const password = document.getElementById('adminPass').value;
    
    if (username === 'admin' && password === 'admin123') {
        isAdminLoggedIn = true;
        localStorage.setItem('adminLoggedIn', 'true');
        showNotification('success', 'Success', 'Login successful!');
        showAdminPanel();
    } else {
        showNotification('error', 'Error', 'Invalid credentials. Try admin/admin123');
    }
}

function logout() {
    isAdminLoggedIn = false;
    localStorage.removeItem('adminLoggedIn');
    showNotification('success', 'Success', 'Logged out successfully');
    showHome();
}

function showSection(sectionId) {
    document.querySelectorAll('section').forEach(section => {
        section.style.display = 'none';
    });
    
    document.querySelectorAll('.sidebar-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    document.getElementById(sectionId).style.display = 'block';
    event.currentTarget.classList.add('active');
    currentSection = sectionId;
    
    if (sectionId === 'dashboard') {
        updateDashboardStats();
        loadRecentAdmissions();
        updateDashboardCharts();
    } else if (sectionId === 'admissions') {
        loadAdmissions();
    } else if (sectionId === 'students') {
        loadStudents();
    } else if (sectionId === 'syllabus') {
        loadSyllabus();
    } else if (sectionId === 'courses') {
        loadAdminCourses();
    } else if (sectionId === 'galleryAdmin') {
        loadAdminGallery();
    } else if (sectionId === 'events') {
        loadUpcomingEvents();
        generateCalendar();
    }
}

// ==================== DASHBOARD FUNCTIONS ====================
function updateDashboardStats() {
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const students = JSON.parse(localStorage.getItem('students')) || [];
    
    document.getElementById('totalAdmissions').textContent = admissions.length;
    document.getElementById('activeStudents').textContent = students.length;
    document.getElementById('totalCourses').textContent = Object.keys(coursesData).length;
    
    let revenue = 0;
    admissions.forEach(admission => {
        if (admission.payment && admission.payment.paidAmount) {
            revenue += admission.payment.paidAmount;
        }
    });
    document.getElementById('revenue').textContent = '' + revenue.toLocaleString('en-IN');
    
    const pendingCount = admissions.filter(a => a.status === 'pending').length;
    document.getElementById('admissionsBadge').textContent = pendingCount > 0 ? pendingCount : '0';
}

function loadRecentAdmissions() {
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const recentAdmissions = admissions.slice(-5).reverse();
    const tbody = document.getElementById('recentAdmissions');
    
    tbody.innerHTML = '';
    recentAdmissions.forEach(admission => {
        const row = document.createElement('tr');
        const categoryName = admission.category === 'creative' ? 'Creative Art' : 'Academic';
        
        row.innerHTML = `
            <td>${admission.name}</td>
            <td>${admission.class}</td>
            <td>${admission.course}</td>
            <td>${categoryName}</td>
            <td>${new Date(admission.date).toLocaleDateString('en-IN')}</td>
            <td><span class="status-indicator ${getStatusClass(admission.status)}">${admission.status}</span></td>
            <td><span class="status-indicator ${getPaymentStatusClass(admission.payment?.status || 'unpaid')}">${admission.payment?.status || 'unpaid'}</span></td>
        `;
        tbody.appendChild(row);
    });
}

function updateDashboardCharts() {
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    
    // Destroy existing charts
    if (admissionsChart) admissionsChart.destroy();
    if (coursesChart) coursesChart.destroy();
    
    // Admissions chart
    const ctx1 = document.getElementById('admissionsChart').getContext('2d');
    admissionsChart = new Chart(ctx1, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Admissions',
                data: [12, 19, 15, 25, 22, 30],
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                }
            }
        }
    });
    
    // Courses chart
    const creativeCount = admissions.filter(a => a.category === 'creative').length;
    const academicCount = admissions.filter(a => a.category === 'academic').length;
    
    const ctx2 = document.getElementById('coursesChart').getContext('2d');
    coursesChart = new Chart(ctx2, {
        type: 'doughnut',
        data: {
            labels: ['Creative Art', 'Academic Excellence'],
            datasets: [{
                data: [creativeCount, academicCount],
                backgroundColor: [
                    'rgb(255, 99, 132)',
                    'rgb(54, 162, 235)'
                ]
            }]
        },
        options: {
            responsive: true
        }
    });
}

// ==================== ADMISSIONS MANAGEMENT ====================
function loadAdmissions() {
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    
    // Pending admissions
    const pendingTbody = document.getElementById('pendingAdmissions');
    const pendingAdmissions = admissions.filter(a => a.status === 'pending');
    pendingTbody.innerHTML = '';
    pendingAdmissions.forEach(admission => {
        const row = createAdmissionRow(admission, 'pending');
        pendingTbody.appendChild(row);
    });
    
    // Approved admissions
    const approvedTbody = document.getElementById('approvedAdmissions');
    const approvedAdmissions = admissions.filter(a => a.status === 'approved');
    approvedTbody.innerHTML = '';
    approvedAdmissions.forEach(admission => {
        const row = createAdmissionRow(admission, 'approved');
        approvedTbody.appendChild(row);
    });
    
    // All admissions
    const allTbody = document.getElementById('allAdmissions');
    allTbody.innerHTML = '';
    admissions.forEach(admission => {
        const row = createAdmissionRow(admission, 'all');
        allTbody.appendChild(row);
    });
}

function createAdmissionRow(admission, type) {
    const row = document.createElement('tr');
    const categoryName = admission.category === 'creative' ? 'Creative Art' : 'Academic';
    
    if (type === 'pending') {
        row.innerHTML = `
            <td>${admission.id}</td>
            <td>${admission.name}</td>
            <td>${admission.class}</td>
            <td>${admission.course}</td>
            <td>${categoryName}</td>
            <td>${new Date(admission.date).toLocaleDateString('en-IN')}</td>
            <td>
                <div class="table-actions">
                    <button class="btn btn-sm btn-secondary" onclick="approveAdmission('${admission.id}')">
                        <i class="fas fa-check"></i> Approve
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="rejectAdmission('${admission.id}')">
                        <i class="fas fa-times"></i> Reject
                    </button>
                </div>
            </td>
        `;
    } else if (type === 'approved') {
        row.innerHTML = `
            <td>${admission.id}</td>
            <td>${admission.name}</td>
            <td>${admission.class}</td>
            <td>${admission.course}</td>
            <td>${categoryName}</td>
            <td>${new Date(admission.date).toLocaleDateString('en-IN')}</td>
            <td>
                <span class="status-indicator ${getPaymentStatusClass(admission.payment?.status || 'unpaid')}">
                    ${admission.payment?.status || 'unpaid'}
                </span>
                ${admission.payment ? `
                <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">
                    ${admission.payment.paidAmount.toLocaleString('en-IN')}/${admission.payment.totalAmount.toLocaleString('en-IN')}
                </div>
                ` : ''}
            </td>
            <td>
                <div class="table-actions">
                    <button class="btn btn-sm btn-primary" onclick="managePayment('${admission.id}')">
                        <i class="fas fa-rupee-sign"></i> Manage
                    </button>
                </div>
            </td>
        `;
    } else {
        row.innerHTML = `
            <td>${admission.id}</td>
            <td>${admission.name}</td>
            <td>${admission.class}</td>
            <td>${admission.course}</td>
            <td>${categoryName}</td>
            <td><span class="status-indicator ${getStatusClass(admission.status)}">${admission.status}</span></td>
            <td><span class="status-indicator ${getPaymentStatusClass(admission.payment?.status || 'unpaid')}">${admission.payment?.status || 'unpaid'}</span></td>
            <td>${new Date(admission.date).toLocaleDateString('en-IN')}</td>
            <td>
                <div class="table-actions">
                    <button class="btn btn-sm btn-secondary" onclick="viewAdmissionDetails('${admission.id}')">
                        <i class="fas fa-eye"></i> View
                    </button>
                </div>
            </td>
        `;
    }
    
    return row;
}

function approveAdmission(admissionId) {
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const admissionIndex = admissions.findIndex(a => a.id === admissionId);
    
    if (admissionIndex !== -1) {
        admissions[admissionIndex].status = 'approved';
        admissions[admissionIndex].approvedDate = new Date().toISOString().split('T')[0];
        
        // Add to students
        const students = JSON.parse(localStorage.getItem('students')) || [];
        const admission = admissions[admissionIndex];
        
        // Check if student already exists
        const studentExists = students.some(s => s.admissionId === admissionId);
        
        if (!studentExists) {
            // Use the same ID for both admission and student
            students.push({
                id: admissionId, // Same as admission ID
                admissionId: admissionId,
                name: admission.name,
                class: admission.class,
                course: admission.course,
                category: admission.category,
                mobile: admission.mobile,
                email: admission.email,
                dob: admission.dob,
                address: admission.address,
                joinDate: new Date().toISOString().split('T')[0],
                feesStatus: admission.payment?.status || 'unpaid',
                performance: 'Good',
                attendance: '95%',
                lastPaymentDate: null,
                status: 'active',
                createdAt: new Date().toISOString()
            });
            localStorage.setItem('students', JSON.stringify(students));
            
            showNotification('success', 'Approved', 
                `Admission approved! Student/Application ID: ${admissionId}`);
        } else {
            showNotification('success', 'Approved', 'Admission has been approved');
        }
        
        localStorage.setItem('admissions', JSON.stringify(admissions));
        
        loadAdmissions();
        updateDashboardStats();
        loadStudents(); // This will refresh the student table
    }
}

function rejectAdmission(admissionId) {
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const admissionIndex = admissions.findIndex(a => a.id === admissionId);
    
    if (admissionIndex !== -1) {
        admissions[admissionIndex].status = 'rejected';
        admissions[admissionIndex].rejectedDate = new Date().toISOString().split('T')[0];
        localStorage.setItem('admissions', JSON.stringify(admissions));
        
        showNotification('success', 'Rejected', 'Admission has been rejected');
        loadAdmissions();
        updateDashboardStats();
    }
}

// ==================== ENHANCED PAYMENT MANAGEMENT ====================
function managePayment(admissionId) {
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const admission = admissions.find(a => a.id === admissionId);
    
    if (!admission) {
        showNotification('error', 'Error', 'Admission not found');
        return;
    }
    
    currentPaymentAdmission = admissionId;
    
    // Load payment details
    const categoryName = admission.category === 'creative' ? 'Creative Art' : 'Academic Excellence';
    const payment = admission.payment || {
        status: 'unpaid',
        totalAmount: getCourseFee(admission.course, admission.category),
        paidAmount: 0,
        pendingAmount: getCourseFee(admission.course, admission.category),
        transactions: []
    };
    
    const paymentDetails = document.getElementById('paymentDetails');
    paymentDetails.innerHTML = `
        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <div>
                    <h4 style="color: var(--primary); margin: 0;">${admission.name}</h4>
                    <p style="color: #666; margin: 5px 0 0 0;">${admission.course} (${categoryName})</p>
                </div>
                <span class="status-indicator ${getPaymentStatusClass(payment.status)}">
                    ${payment.status.toUpperCase()}
                </span>
            </div>
            
            <div class="payment-stats">
                <div class="payment-stat-card">
                    <div class="payment-stat-value">${payment.totalAmount.toLocaleString('en-IN')}</div>
                    <div class="payment-stat-label">Total Fee</div>
                </div>
                <div class="payment-stat-card">
                    <div class="payment-stat-value" style="color: var(--success);">${payment.paidAmount.toLocaleString('en-IN')}</div>
                    <div class="payment-stat-label">Amount Paid</div>
                </div>
                <div class="payment-stat-card">
                    <div class="payment-stat-value" style="color: var(--warning);">${payment.pendingAmount.toLocaleString('en-IN')}</div>
                    <div class="payment-stat-label">Pending Amount</div>
                </div>
            </div>
        </div>
    `;
    
    // Load payment history
    const paymentHistory = document.getElementById('paymentHistory');
    if (payment.transactions && payment.transactions.length > 0) {
        paymentHistory.innerHTML = `
            <h4 style="color: var(--dark); margin-bottom: 15px;">
                <i class="fas fa-history"></i> Payment History
            </h4>
            <div style="max-height: 200px; overflow-y: auto;">
                ${payment.transactions.map((transaction, index) => `
                    <div class="payment-history-item">
                        <div class="payment-history-header">
                            <div>
                                <strong style="color: var(--dark);">Payment ${index + 1}</strong>
                                <span class="payment-history-method">
                                    ${transaction.method.toUpperCase()}
                                </span>
                            </div>
                            <span class="payment-history-amount">${transaction.amount.toLocaleString('en-IN')}</span>
                        </div>
                        <div class="payment-history-details">
                            <div>Date: ${new Date(transaction.date).toLocaleDateString('en-IN')}</div>
                            ${transaction.notes ? `<div style="margin-top: 5px;">Notes: ${transaction.notes}</div>` : ''}
                            ${transaction.transactionId ? `<div>Transaction ID: ${transaction.transactionId}</div>` : ''}
                            ${transaction.chequeNumber ? `<div>Cheque No: ${transaction.chequeNumber}</div>` : ''}
                            ${transaction.receivedBy ? `<div>Received by: ${transaction.receivedBy}</div>` : ''}
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
    } else {
        paymentHistory.innerHTML = `
            <div style="text-align: center; padding: 30px; background: white; border-radius: 10px;">
                <i class="fas fa-wallet" style="font-size: 3rem; color: #ddd; margin-bottom: 15px;"></i>
                <p style="color: #666;">No payment history available</p>
            </div>
        `;
    }
    
    // Set max payment amount as pending amount
    document.getElementById('paymentAmount').max = payment.pendingAmount;
    document.getElementById('paymentAmount').placeholder = `Max: ${payment.pendingAmount.toLocaleString('en-IN')}`;
    
    // Show/hide additional fields based on payment method
    document.getElementById('paymentMethod').addEventListener('change', function() {
        document.getElementById('chequeDetails').style.display = this.value === 'cheque' ? 'block' : 'none';
        document.getElementById('transactionDetails').style.display = this.value === 'online' || this.value === 'card' || this.value === 'upi' ? 'block' : 'none';
    });
    
    openModal('paymentModal');
}

function recordPayment() {
    const admissionId = currentPaymentAdmission;
    const amount = parseFloat(document.getElementById('paymentAmount').value);
    const method = document.getElementById('paymentMethod').value;
    const date = document.getElementById('paymentDate').value;
    const notes = document.getElementById('paymentNotes').value.trim();
    const receivedBy = document.getElementById('receivedBy').value.trim();
    const chequeNumber = document.getElementById('chequeNumber').value.trim();
    const transactionId = document.getElementById('transactionId').value.trim();
    
    if (!amount || amount <= 0) {
        showNotification('error', 'Error', 'Please enter a valid amount');
        return;
    }
    
    if (!date) {
        showNotification('error', 'Error', 'Please select a payment date');
        return;
    }
    
    if (method === 'cheque' && !chequeNumber) {
        showNotification('error', 'Error', 'Please enter cheque number for cheque payments');
        return;
    }
    
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const admissionIndex = admissions.findIndex(a => a.id === admissionId);
    
    if (admissionIndex === -1) {
        showNotification('error', 'Error', 'Admission not found');
        return;
    }
    
    const admission = admissions[admissionIndex];
    
    // Initialize payment object if not exists
    if (!admission.payment) {
        admission.payment = {
            status: 'unpaid',
            totalAmount: getCourseFee(admission.course, admission.category),
            paidAmount: 0,
            pendingAmount: getCourseFee(admission.course, admission.category),
            transactions: []
        };
    }
    
    // Check if payment exceeds pending amount
    if (amount > admission.payment.pendingAmount) {
        showNotification('error', 'Error', `Payment amount (${amount.toLocaleString('en-IN')}) exceeds pending amount (${admission.payment.pendingAmount.toLocaleString('en-IN')})`);
        return;
    }
    
    // Update payment details
    admission.payment.paidAmount += amount;
    admission.payment.pendingAmount -= amount;
    
    // Update payment status
    if (admission.payment.pendingAmount <= 0) {
        admission.payment.status = 'paid';
    } else if (admission.payment.paidAmount > 0) {
        admission.payment.status = 'partial';
    }
    
    // Add transaction record
    const transaction = {
        date: date,
        amount: amount,
        method: method,
        notes: notes,
        receivedBy: receivedBy || 'Admin'
    };
    
    if (chequeNumber) transaction.chequeNumber = chequeNumber;
    if (transactionId) transaction.transactionId = transactionId;
    
    admission.payment.transactions.push(transaction);
    
    // Save to localStorage
    localStorage.setItem('admissions', JSON.stringify(admissions));
    
    // Update student fees status
    const students = JSON.parse(localStorage.getItem('students')) || [];
    const studentIndex = students.findIndex(s => s.admissionId === admissionId);
    if (studentIndex !== -1) {
        students[studentIndex].feesStatus = admission.payment.status;
        localStorage.setItem('students', JSON.stringify(students));
    }
    
    // Generate receipt
    generatePaymentReceipt(admission, transaction);
    
    showNotification('success', 'Payment Recorded', `${amount.toLocaleString('en-IN')} payment recorded successfully`);
    
    // Refresh the payment modal with updated data
    managePayment(admissionId);
    
    // Clear form
    document.getElementById('paymentAmount').value = '';
    document.getElementById('paymentNotes').value = '';
    document.getElementById('chequeNumber').value = '';
    document.getElementById('transactionId').value = '';
    
    // Update dashboard and other sections
    loadAdmissions();
    updateDashboardStats();
    loadStudents();
}

function generatePaymentReceipt(admission, transaction) {
    const receiptNumber = 'RCPT' + Date.now().toString().slice(-8);
    currentReceiptContent = `
        <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px;">
                <h2 style="color: var(--primary); margin: 0;">ART ZONE PRO</h2>
                <p style="margin: 5px 0;">Payment Receipt</p>
                <p style="font-size: 0.9rem; color: #666;">Receipt No: ${receiptNumber}</p>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
                <div>
                    <p><strong>Student Name:</strong> ${admission.name}</p>
                    <p><strong>Application/Student ID:</strong> ${admission.id}</p>
                    <p><strong>Course:</strong> ${admission.course}</p>
                </div>
                <div>
                    <p><strong>Receipt Date:</strong> ${new Date().toLocaleDateString('en-IN')}</p>
                    <p><strong>Receipt Time:</strong> ${new Date().toLocaleTimeString('en-IN')}</p>
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">Payment Details</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Amount Received</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right; color: var(--success); font-weight: 600;">
                            ${transaction.amount.toLocaleString('en-IN')}
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Payment Method</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right;">
                            ${transaction.method.toUpperCase()}
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Payment Date</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right;">
                            ${new Date(transaction.date).toLocaleDateString('en-IN')}
                        </td>
                    </tr>
                    ${transaction.chequeNumber ? `
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Cheque Number</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right;">
                            ${transaction.chequeNumber}
                        </td>
                    </tr>
                    ` : ''}
                    ${transaction.transactionId ? `
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Transaction ID</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right;">
                            ${transaction.transactionId}
                        </td>
                    </tr>
                    ` : ''}
                </table>
            </div>
            
            <div style="margin-bottom: 30px;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">Payment Summary</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Total Course Fee</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right;">
                            ${admission.payment.totalAmount.toLocaleString('en-IN')}
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Previously Paid</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right; color: var(--success);">
                            ${(admission.payment.paidAmount - transaction.amount).toLocaleString('en-IN')}
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Current Payment</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right; color: var(--success);">
                            ${transaction.amount.toLocaleString('en-IN')}
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Total Paid</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right; font-weight: 600; color: var(--success);">
                            ${admission.payment.paidAmount.toLocaleString('en-IN')}
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Balance Due</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid #ddd; text-align: right; font-weight: 600; color: var(--warning);">
                            ${admission.payment.pendingAmount.toLocaleString('en-IN')}
                        </td>
                    </tr>
                </table>
            </div>
            
            <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; text-align: center;">
                <div style="display: inline-block; padding: 10px 20px; border: 1px solid #ddd; border-radius: 5px;">
                    <p style="margin: 5px 0;"><strong>Received By:</strong> ${transaction.receivedBy || 'Admin'}</p>
                    <p style="margin: 5px 0;">___________________</p>
                    <p style="margin: 5px 0; font-size: 0.9rem;">Authorized Signature</p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px; color: #666; font-size: 0.9rem;">
                <p>This is a computer generated receipt. No signature required.</p>
                <p>For any queries, contact: +91 9876543210 | Email: accounts@artzonepro.com</p>
            </div>
        </div>
    `;
}

function printPaymentReceipt() {
    if (!currentReceiptContent) {
        showNotification('error', 'Error', 'No receipt available to print');
        return;
    }
    
    const printWindow = window.open('', '_blank', 'width=800,height=600');
    printWindow.document.write(`
        <html>
            <head>
                <title>Payment Receipt - Art Zone Pro</title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    @media print {
                        @page { margin: 0; }
                        body { margin: 1.6cm; }
                        .no-print { display: none; }
                    }
                </style>
            </head>
            <body>
                ${currentReceiptContent}
                <div class="no-print" style="text-align: center; margin-top: 20px;">
                    <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        Print Receipt
                    </button>
                    <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; margin-left: 10px; cursor: pointer;">
                        Close
                    </button>
                </div>
            </body>
        </html>
    `);
    printWindow.document.close();
}

function viewAdmissionDetails(admissionId) {
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const admission = admissions.find(a => a.id === admissionId);
    
    if (admission) {
        Swal.fire({
            title: 'Admission Details',
            html: `
                <div style="text-align: left;">
                    <p><strong>ID:</strong> ${admission.id}</p>
                    <p><strong>Name:</strong> ${admission.name}</p>
                    <p><strong>Class:</strong> ${admission.class}</p>
                    <p><strong>Course:</strong> ${admission.course}</p>
                    <p><strong>Category:</strong> ${admission.category === 'creative' ? 'Creative Art' : 'Academic'}</p>
                    <p><strong>Status:</strong> <span class="status-indicator ${getStatusClass(admission.status)}">${admission.status}</span></p>
                    <p><strong>Date:</strong> ${new Date(admission.date).toLocaleDateString('en-IN')}</p>
                </div>
            `,
            width: 500,
            showConfirmButton: false,
            showCloseButton: true
        });
    }
}

// ==================== STUDENT MANAGEMENT ====================
function loadStudents() {
    const students = JSON.parse(localStorage.getItem('students')) || [];
    const tbody = document.getElementById('studentsData');
    
    if (students.length === 0) {
        tbody.innerHTML = `
            <tr>
                <td colspan="9" style="text-align: center; padding: 40px; color: #666;">
                    <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 15px; display: block; color: #ddd;"></i>
                    No students found. Approve admissions to add students.
                </td>
            </tr>
        `;
        return;
    }
    
    tbody.innerHTML = '';
    students.forEach(student => {
        const row = document.createElement('tr');
        
        // Get payment status from admission if available
        const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
        const admission = admissions.find(a => a.id === student.id);
        const paymentStatus = admission?.payment?.status || student.feesStatus || 'unpaid';
        
        row.innerHTML = `
            <td style="vertical-align: middle;">${student.id}</td>
            <td style="vertical-align: middle;">
                <div style="font-weight: 600;">${student.name}</div>
                ${student.email ? `<div style="font-size: 0.8rem; color: #666;">${student.email}</div>` : ''}
            </td>
            <td style="vertical-align: middle;">${student.class}</td>
            <td style="vertical-align: middle;">${student.course}</td>
            <td style="vertical-align: middle;">${student.category === 'creative' ? 'Creative Art' : 'Academic Excellence'}</td>
            <td style="vertical-align: middle;">${student.joinDate}</td>
            <td style="vertical-align: middle;">
                <span class="status-indicator ${getPaymentStatusClass(paymentStatus)}">
                    <i class="${paymentStatus === 'paid' ? 'fas fa-check-circle' : 
                              paymentStatus === 'partial' ? 'fas fa-clock' : 'fas fa-exclamation-circle'}"></i>
                    ${paymentStatus}
                </span>
            </td>
            <td style="vertical-align: middle;">
                <span class="status-indicator ${student.performance === 'Excellent' ? 'status-approved' : 
                                               student.performance === 'Good' ? '' : 'status-pending'}">
                    ${student.performance || 'Good'} ${student.attendance || '95%'}
                </span>
            </td>
            <td style="vertical-align: middle;">
                <div class="table-actions">
                    <button class="btn btn-sm btn-secondary" onclick="viewStudentDetails('${student.id}')">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="btn btn-sm btn-primary" onclick="editStudent('${student.id}')">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="deleteStudent('${student.id}')">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </td>
        `;
        tbody.appendChild(row);
    });
}

// View student details
function viewStudentDetails(studentId) {
    const students = JSON.parse(localStorage.getItem('students')) || [];
    const student = students.find(s => s.id === studentId);
    
    if (!student) {
        showNotification('error', 'Error', 'Student not found');
        return;
    }
    
    // Find associated admission for payment details
    const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
    const admission = admissions.find(a => a.id === student.admissionId);
    
    Swal.fire({
        title: student.name,
        html: `
            <div style="text-align: left; max-height: 400px; overflow-y: auto;">
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div><strong>Student ID:</strong></div>
                        <div style="color: var(--primary); font-weight: 600;">${student.id}</div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div><strong>Class:</strong></div>
                        <div>${student.class}</div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div><strong>Course:</strong></div>
                        <div>${student.course}</div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div><strong>Category:</strong></div>
                        <div>${student.category === 'creative' ? 'Creative Art' : 'Academic Excellence'}</div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div><strong>Join Date:</strong></div>
                        <div>${new Date(student.joinDate).toLocaleDateString('en-IN')}</div>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="margin-top: 0; color: var(--primary);">Contact Information</h4>
                    ${student.mobile ? `<p><strong>Mobile:</strong> ${student.mobile}</p>` : ''}
                    ${student.email ? `<p><strong>Email:</strong> ${student.email}</p>` : ''}
                    ${student.address ? `<p><strong>Address:</strong> ${student.address}</p>` : ''}
                </div>
                
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="margin-top: 0; color: var(--primary);">Academic Information</h4>
                    <p><strong>Performance:</strong> ${student.performance}</p>
                    <p><strong>Attendance:</strong> ${student.attendance || 'N/A'}</p>
                    <p><strong>Status:</strong> ${student.status || 'active'}</p>
                </div>
                
                ${admission ? `
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="margin-top: 0; color: var(--primary);">Payment Information</h4>
                    <p><strong>Fees Status:</strong> <span class="status-indicator ${getPaymentStatusClass(admission.payment?.status || 'unpaid')}">
                        ${admission.payment?.status || 'unpaid'}
                    </span></p>
                    ${admission.payment ? `
                    <p><strong>Total Fee:</strong> ${admission.payment.totalAmount?.toLocaleString('en-IN') || '0'}</p>
                    <p><strong>Paid Amount:</strong> ${admission.payment.paidAmount?.toLocaleString('en-IN') || '0'}</p>
                    <p><strong>Pending Amount:</strong> ${admission.payment.pendingAmount?.toLocaleString('en-IN') || '0'}</p>
                    ` : ''}
                </div>
                ` : ''}
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="manageStudentPayment('${student.admissionId || student.id}')">
                        <i class="fas fa-rupee-sign"></i> Manage Payment
                    </button>
                    <button class="btn btn-secondary" onclick="generateStudentReport('${student.id}')">
                        <i class="fas fa-file-pdf"></i> Generate Report
                    </button>
                </div>
            </div>
        `,
        width: 700,
        showConfirmButton: false,
        showCloseButton: true
    });
}

// Edit student
function editStudent(studentId) {
    const students = JSON.parse(localStorage.getItem('students')) || [];
    const studentIndex = students.findIndex(s => s.id === studentId);
    
    if (studentIndex === -1) {
        showNotification('error', 'Error', 'Student not found');
        return;
    }
    
    const student = students[studentIndex];
    
    Swal.fire({
        title: 'Edit Student',
        html: `
            <div style="text-align: left;">
                <input type="text" id="editStudentName" class="swal2-input" placeholder="Student Name" value="${student.name}" required>
                <select id="editStudentClass" class="swal2-input" style="width: 100%;" required>
                    <option value="" ${!student.class ? 'selected' : ''}>Select Class</option>
                    <option value="Class 1-5" ${student.class === 'Class 1-5' ? 'selected' : ''}>Class 1-5</option>
                    <option value="Class 6-8" ${student.class === 'Class 6-8' ? 'selected' : ''}>Class 6-8</option>
                    <option value="Class 9-10" ${student.class === 'Class 9-10' ? 'selected' : ''}>Class 9-10</option>
                    <option value="Class 11-12" ${student.class === 'Class 11-12' ? 'selected' : ''}>Class 11-12</option>
                    <option value="Pre-School" ${student.class === 'Pre-School' ? 'selected' : ''}>Pre-School</option>
                </select>
                <input type="text" id="editStudentCourse" class="swal2-input" placeholder="Course" value="${student.course}" required>
                <select id="editStudentPerformance" class="swal2-input" style="width: 100%;" required>
                    <option value="Excellent" ${student.performance === 'Excellent' ? 'selected' : ''}>Excellent</option>
                    <option value="Good" ${student.performance === 'Good' ? 'selected' : ''}>Good</option>
                    <option value="Average" ${student.performance === 'Average' ? 'selected' : ''}>Average</option>
                    <option value="Poor" ${student.performance === 'Poor' ? 'selected' : ''}>Poor</option>
                </select>
                <input type="text" id="editStudentAttendance" class="swal2-input" placeholder="Attendance (e.g., 95%)" value="${student.attendance || ''}">
                <select id="editStudentStatus" class="swal2-input" style="width: 100%;" required>
                    <option value="active" ${student.status === 'active' ? 'selected' : ''}>Active</option>
                    <option value="inactive" ${student.status === 'inactive' ? 'selected' : ''}>Inactive</option>
                    <option value="completed" ${student.status === 'completed' ? 'selected' : ''}>Completed</option>
                    <option value="dropped" ${student.status === 'dropped' ? 'selected' : ''}>Dropped</option>
                </select>
            </div>
        `,
        focusConfirm: false,
        showCancelButton: true,
        confirmButtonText: 'Save Changes',
        cancelButtonText: 'Cancel',
        preConfirm: () => {
            const name = document.getElementById('editStudentName').value.trim();
            const studentClass = document.getElementById('editStudentClass').value;
            const course = document.getElementById('editStudentCourse').value.trim();
            const performance = document.getElementById('editStudentPerformance').value;
            const attendance = document.getElementById('editStudentAttendance').value.trim();
            const status = document.getElementById('editStudentStatus').value;
            
            if (!name || !studentClass || !course) {
                Swal.showValidationMessage('Please fill all required fields');
                return false;
            }
            
            return { name, studentClass, course, performance, attendance, status };
        }
    }).then((result) => {
        if (result.isConfirmed) {
            const { name, studentClass, course, performance, attendance, status } = result.value;
            
            students[studentIndex].name = name;
            students[studentIndex].class = studentClass;
            students[studentIndex].course = course;
            students[studentIndex].performance = performance;
            students[studentIndex].attendance = attendance;
            students[studentIndex].status = status;
            students[studentIndex].updatedAt = new Date().toISOString();
            
            localStorage.setItem('students', JSON.stringify(students));
            
            showNotification('success', 'Success', 'Student information updated');
            loadStudents();
        }
    });
}

// Delete student
function deleteStudent(studentId) {
    Swal.fire({
        title: 'Delete Student?',
        text: 'This action cannot be undone. Are you sure?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it',
        cancelButtonText: 'Cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            const students = JSON.parse(localStorage.getItem('students')) || [];
            const studentIndex = students.findIndex(s => s.id === studentId);
            
            if (studentIndex !== -1) {
                const student = students[studentIndex];
                
                // Update admission status if exists
                const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
                const admissionIndex = admissions.findIndex(a => a.id === student.admissionId);
                if (admissionIndex !== -1) {
                    admissions[admissionIndex].status = 'inactive';
                    localStorage.setItem('admissions', JSON.stringify(admissions));
                }
                
                // Remove student
                students.splice(studentIndex, 1);
                localStorage.setItem('students', JSON.stringify(students));
                
                showNotification('success', 'Deleted', 'Student has been deleted');
                loadStudents();
                updateDashboardStats();
            }
        }
    });
}

// Manage student payment (redirects to payment management)
function manageStudentPayment(admissionId) {
    showSection('admissions');
    switchTab('approvedTab');
    
    // Scroll to the admission
    setTimeout(() => {
        const admissionRow = document.querySelector(`#approvedAdmissions tr:has(td:contains("${admissionId}"))`);
        if (admissionRow) {
            admissionRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Highlight the row
            admissionRow.style.animation = 'none';
            setTimeout(() => {
                admissionRow.style.backgroundColor = 'rgba(255, 193, 7, 0.2)';
                admissionRow.style.transition = 'background-color 0.5s';
                
                // Remove highlight after 3 seconds
                setTimeout(() => {
                    admissionRow.style.backgroundColor = '';
                }, 3000);
            }, 100);
        }
        
        showNotification('info', 'Payment Management', 
            'Please use the payment button in the Approved Admissions tab');
    }, 500);
}

// Generate student report
function generateStudentReport(studentId) {
    const students = JSON.parse(localStorage.getItem('students')) || [];
    const student = students.find(s => s.id === studentId);
    
    if (!student) {
        showNotification('error', 'Error', 'Student not found');
        return;
    }
    
    Swal.fire({
        title: 'Generate Report',
        html: `
            <div style="text-align: left;">
                <p>Select report type for <strong>${student.name}</strong>:</p>
                <select id="reportType" class="swal2-input" style="width: 100%;">
                    <option value="performance">Performance Report</option>
                    <option value="attendance">Attendance Report</option>
                    <option value="payment">Payment Report</option>
                    <option value="complete">Complete Student Report</option>
                </select>
                <div style="margin-top: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Date Range:</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="date" id="reportFromDate" class="swal2-input" style="flex: 1;">
                        <input type="date" id="reportToDate" class="swal2-input" style="flex: 1;" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                </div>
            </div>
        `,
        showCancelButton: true,
        confirmButtonText: 'Generate',
        cancelButtonText: 'Cancel',
        preConfirm: () => {
            return {
                type: document.getElementById('reportType').value,
                fromDate: document.getElementById('reportFromDate').value,
                toDate: document.getElementById('reportToDate').value
            };
        }
    }).then((result) => {
        if (result.isConfirmed) {
            showNotification('info', 'Report Generation', 
                `${result.value.type.replace(/^./, c => c.toUpperCase())} report generation would be implemented in production`);
        }
    });
}

// Update openAddStudentModal function to handle direct student creation
function openAddStudentModal() {
    Swal.fire({
        title: 'Add New Student',
        html: `
            <div style="text-align: left;">
                <input type="text" id="newStudentName" class="swal2-input" placeholder="Student Name" required>
                <select id="newStudentClass" class="swal2-input" style="width: 100%;" required>
                    <option value="">Select Class</option>
                    <option value="Class 1-5">Class 1-5</option>
                    <option value="Class 6-8">Class 6-8</option>
                    <option value="Class 9-10">Class 9-10</option>
                    <option value="Class 11-12">Class 11-12</option>
                    <option value="Pre-School">Pre-School</option>
                </select>
                <input type="text" id="newStudentCourse" class="swal2-input" placeholder="Course" required>
                <select id="newStudentCategory" class="swal2-input" style="width: 100%;" required>
                    <option value="">Select Category</option>
                    <option value="creative">Creative Art</option>
                    <option value="academic">Academic Excellence</option>
                </select>
                <input type="tel" id="newStudentMobile" class="swal2-input" placeholder="Mobile Number">
                <input type="email" id="newStudentEmail" class="swal2-input" placeholder="Email">
            </div>
        `,
        focusConfirm: false,
        showCancelButton: true,
        confirmButtonText: 'Add Student',
        cancelButtonText: 'Cancel',
        preConfirm: () => {
            const name = document.getElementById('newStudentName').value.trim();
            const studentClass = document.getElementById('newStudentClass').value;
            const course = document.getElementById('newStudentCourse').value.trim();
            const category = document.getElementById('newStudentCategory').value;
            
            if (!name || !studentClass || !course || !category) {
                Swal.showValidationMessage('Please fill all required fields');
                return false;
            }
            
            return { name, studentClass, course, category };
        }
    }).then((result) => {
        if (result.isConfirmed) {
            const { name, studentClass, course, category } = result.value;
            const mobile = document.getElementById('newStudentMobile').value.trim();
            const email = document.getElementById('newStudentEmail').value.trim();
            
            const students = JSON.parse(localStorage.getItem('students')) || [];
            const admissions = JSON.parse(localStorage.getItem('admissions')) || [];
            
            // Generate ID - same for both student and admission
            const studentId = 'STU' + Date.now().toString().slice(-8);
            
            // Create admission record
            const admission = {
                id: studentId,
                name: name,
                class: studentClass,
                course: course,
                category: category,
                mobile: mobile,
                email: email,
                date: new Date().toISOString().split('T')[0],
                status: 'approved', // Directly approved since added by admin
                payment: {
                    status: 'unpaid',
                    totalAmount: getCourseFee(course, category),
                    paidAmount: 0,
                    pendingAmount: getCourseFee(course, category),
                    transactions: []
                }
            };
            
            admissions.push(admission);
            
            // Create student record with same ID
            students.push({
                id: studentId, // Same as admission ID
                admissionId: studentId,
                name: name,
                class: studentClass,
                course: course,
                category: category,
                mobile: mobile,
                email: email,
                joinDate: new Date().toISOString().split('T')[0],
                feesStatus: 'unpaid',
                performance: 'Good',
                attendance: 'N/A',
                status: 'active',
                createdAt: new Date().toISOString()
            });
            
            localStorage.setItem('admissions', JSON.stringify(admissions));
            localStorage.setItem('students', JSON.stringify(students));
            
            showNotification('success', 'Success', 
                `Student added successfully! Student/Application ID: ${studentId}`);
            loadStudents();
            updateDashboardStats();
            loadAdmissions();
        }
    });
}

// ==================== SYLLABUS MANAGEMENT ====================
function loadSyllabus() {
    const syllabus = JSON.parse(localStorage.getItem('syllabus')) || {};
    const tbody = document.getElementById('syllabusData');
    
    tbody.innerHTML = '';
    
    for (const className in syllabus) {
        for (const subject in syllabus[className]) {
            const row = document.createElement('tr');
            
            row.innerHTML = `
                <td>${className}</td>
                <td>${subject}</td>
                <td>${syllabus[className][subject]}</td>
                <td>${new Date().toLocaleDateString('en-IN')}</td>
                <td>
                    <div class="table-actions">
                        <button class="btn btn-sm btn-secondary" onclick="editSyllabus('${className}', '${subject}', '${syllabus[className][subject].replace(/'/g, "\\'")}')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteSyllabus('${className}', '${subject}')">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </td>
            `;
            tbody.appendChild(row);
        }
    }
}

function openAddSyllabusModal() {
    openModal('addSyllabusModal');
}

function addNewSyllabus() {
    const className = document.getElementById('newSyllabusClass').value.trim();
    const subject = document.getElementById('newSyllabusSubject').value.trim();
    const details = document.getElementById('newSyllabusDetails').value.trim();
    
    if (!className || !subject || !details) {
        showNotification('error', 'Error', 'Please fill all fields');
        return;
    }
    
    const syllabus = JSON.parse(localStorage.getItem('syllabus')) || {};
    
    if (!syllabus[className]) {
        syllabus[className] = {};
    }
    
    syllabus[className][subject] = details;
    localStorage.setItem('syllabus', JSON.stringify(syllabus));
    
    showNotification('success', 'Success', 'Syllabus added successfully');
    closeModal('addSyllabusModal');
    loadSyllabus();
    
    // Clear form
    document.getElementById('newSyllabusClass').value = '';
    document.getElementById('newSyllabusSubject').value = '';
    document.getElementById('newSyllabusDetails').value = '';
}

function editSyllabus(className, subject, details) {
    document.getElementById('editOriginalClass').value = className;
    document.getElementById('editOriginalSubject').value = subject;
    document.getElementById('editSyllabusClass').value = className;
    document.getElementById('editSyllabusSubject').value = subject;
    document.getElementById('editSyllabusDetails').value = details;
    
    openModal('editSyllabusModal');
}

function updateSyllabus() {
    const originalClass = document.getElementById('editOriginalClass').value;
    const originalSubject = document.getElementById('editOriginalSubject').value;
    const newClass = document.getElementById('editSyllabusClass').value.trim();
    const newSubject = document.getElementById('editSyllabusSubject').value.trim();
    const details = document.getElementById('editSyllabusDetails').value.trim();
    
    if (!newClass || !newSubject || !details) {
        showNotification('error', 'Error', 'Please fill all fields');
        return;
    }
    
    const syllabus = JSON.parse(localStorage.getItem('syllabus')) || {};
    
    // Remove old entry
    if (syllabus[originalClass] && syllabus[originalClass][originalSubject]) {
        delete syllabus[originalClass][originalSubject];
        
        // Remove class if empty
        if (Object.keys(syllabus[originalClass]).length === 0) {
            delete syllabus[originalClass];
        }
    }
    
    // Add new entry
    if (!syllabus[newClass]) {
        syllabus[newClass] = {};
    }
    
    syllabus[newClass][newSubject] = details;
    localStorage.setItem('syllabus', JSON.stringify(syllabus));
    
    showNotification('success', 'Success', 'Syllabus updated successfully');
    closeModal('editSyllabusModal');
    loadSyllabus();
}

function deleteSyllabus(className, subject) {
    Swal.fire({
        title: 'Delete Syllabus?',
        text: `Are you sure you want to delete ${subject} syllabus for ${className}?`,
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Yes, delete it',
        cancelButtonText: 'Cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            const syllabus = JSON.parse(localStorage.getItem('syllabus')) || {};
            
            if (syllabus[className] && syllabus[className][subject]) {
                delete syllabus[className][subject];
                
                // Remove class if empty
                if (Object.keys(syllabus[className]).length === 0) {
                    delete syllabus[className];
                }
                
                localStorage.setItem('syllabus', JSON.stringify(syllabus));
                showNotification('success', 'Deleted', 'Syllabus deleted successfully');
                loadSyllabus();
            }
        }
    });
}

// ==================== COURSE MANAGEMENT ====================
function loadAdminCourses() {
    const grid = document.getElementById('adminCoursesGrid');
    
    grid.innerHTML = '';
    
    Object.keys(coursesData).forEach(courseName => {
        const course = coursesData[courseName];
        const card = document.createElement('div');
        card.className = 'card';
        card.style.background = 'white';
        card.style.color = 'var(--dark)';
        
        card.innerHTML = `
            <div class="card-icon" style="color: var(--primary);">
                <i class="${course.category === 'Creative Art' ? 'fas fa-paint-brush' : 'fas fa-graduation-cap'}"></i>
            </div>
            <h3 style="color: var(--dark);">${courseName}</h3>
            <p style="color: #666;">${course.description}</p>
            <div style="margin-top: 20px; color: var(--primary); font-weight: 600;">
                <i class="fas fa-clock"></i> ${course.duration}
            </div>
            <div style="margin-top: 10px; color: var(--success); font-weight: 600;">
                <i class="fas fa-rupee-sign"></i> ${course.fee}
            </div>
            <div style="margin-top: 10px;">
                <span class="status-indicator">${course.category}</span>
            </div>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn btn-sm btn-secondary">
                    <i class="fas fa-edit"></i> Edit
                </button>
                <button class="btn btn-sm btn-danger">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </div>
        `;
        grid.appendChild(card);
    });
}

function openAddCourseModal() {
    openModal('addCourseModal');
}

function addNewCourse() {
    const name = document.getElementById('newCourseName').value.trim();
    const category = document.getElementById('newCourseCategory').value;
    const description = document.getElementById('newCourseDescription').value.trim();
    const duration = document.getElementById('newCourseDuration').value.trim();
    const fee = document.getElementById('newCourseFee').value.trim();
    
    if (!name || !category || !description || !duration || !fee) {
        showNotification('error', 'Error', 'Please fill all fields');
        return;
    }
    
    // In a real app, you would save to localStorage
    showNotification('success', 'Success', 'Course added successfully (demo)');
    closeModal('addCourseModal');
    
    // Clear form
    document.getElementById('newCourseName').value = '';
    document.getElementById('newCourseCategory').value = '';
    document.getElementById('newCourseDescription').value = '';
    document.getElementById('newCourseDuration').value = '';
    document.getElementById('newCourseFee').value = '';
}

// ==================== GALLERY FUNCTIONS ====================
function loadCreativeArtCourses() {
    const grid = document.getElementById('creativeCoursesGrid');
    if (!grid) return;
    
    grid.innerHTML = '';
    
    Object.keys(coursesData).forEach(courseName => {
        const course = coursesData[courseName];
        if (course.category === 'Creative Art') {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-icon">
                    <i class="fas fa-paint-brush"></i>
                </div>
                <h3>${courseName}</h3>
                <p>${course.description}</p>
                <div style="margin-top: 20px; color: var(--secondary); font-weight: 600;">
                    <i class="fas fa-clock"></i> ${course.duration}
                </div>
                <div style="margin-top: 10px; color: var(--secondary); font-weight: 600;">
                    <i class="fas fa-rupee-sign"></i> ${course.fee}
                </div>
                <button class="btn btn-primary" style="margin-top: 20px;" onclick="showAdmissionForm(); selectCourse('${courseName}', 'creative', ${JSON.stringify(course).replace(/"/g, '&quot;')})">Enroll Now</button>
            `;
            grid.appendChild(card);
        }
    });
}

function loadAcademicCourses() {
    const grid = document.getElementById('academicCoursesGrid');
    if (!grid) return;
    
    grid.innerHTML = '';
    
    Object.keys(coursesData).forEach(courseName => {
        const course = coursesData[courseName];
        if (course.category === 'Academic Excellence') {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h3>${courseName}</h3>
                <p>${course.description}</p>
                <div style="margin-top: 20px; color: var(--secondary); font-weight: 600;">
                    <i class="fas fa-clock"></i> ${course.duration}
                </div>
                <div style="margin-top: 10px; color: var(--secondary); font-weight: 600;">
                    <i class="fas fa-rupee-sign"></i> ${course.fee}
                </div>
                <button class="btn btn-primary" style="margin-top: 20px;" onclick="showAdmissionForm(); selectCourse('${courseName}', 'academic', ${JSON.stringify(course).replace(/"/g, '&quot;')})">Enroll Now</button>
            `;
            grid.appendChild(card);
        }
    });
}

function loadPublicEvents() {
    const events = JSON.parse(localStorage.getItem('events')) || [];
    const grid = document.getElementById('publicEventsGrid');
    if (!grid) return;
    
    grid.innerHTML = '';
    
    events.forEach(event => {
        const eventDate = new Date(event.date);
        const formattedDate = eventDate.toLocaleDateString('en-IN', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        let eventIcon = 'fas fa-calendar-alt';
        switch(event.type) {
            case 'Workshop':
                eventIcon = 'fas fa-chalkboard-teacher';
                break;
            case 'Exhibition':
                eventIcon = 'fas fa-palette';
                break;
            case 'Competition':
                eventIcon = 'fas fa-trophy';
                break;
            case 'Meeting':
                eventIcon = 'fas fa-users';
                break;
        }
        
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <div class="card-icon">
                <i class="${eventIcon}"></i>
            </div>
            <h3>${event.title}</h3>
            <div style="margin: 15px 0; padding: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 8px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                    <i class="fas fa-calendar" style="color: var(--secondary);"></i>
                    <span style="font-weight: 600;">${formattedDate}</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-tag" style="color: var(--secondary);"></i>
                    <span class="status-indicator" style="background: rgba(255, 255, 255, 0.1); color: white; border: none;">${event.type}</span>
                </div>
            </div>
            <p>${event.description}</p>
            <button class="btn btn-secondary" style="margin-top: 15px;" onclick="showEventDetails(${JSON.stringify(event).replace(/"/g, '&quot;')})">
                <i class="fas fa-info-circle"></i> View Details
            </button>
        `;
        grid.appendChild(card);
    });
}

function showEventDetails(event) {
    const eventDate = new Date(event.date);
    const formattedDate = eventDate.toLocaleDateString('en-IN', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
    
    Swal.fire({
        title: event.title,
        html: `
            <div style="text-align: left;">
                <div style="margin-bottom: 20px;">
                    <p><strong>Date:</strong> ${formattedDate}</p>
                    <p><strong>Type:</strong> <span class="status-indicator">${event.type}</span></p>
                </div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p style="margin: 0;">${event.description}</p>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" onclick="showAdmissionForm()">
                        <i class="fas fa-user-plus"></i> Register Now
                    </button>
                    <button class="btn btn-secondary" onclick="showEvents()">
                        <i class="fas fa-calendar"></i> View All Events
                    </button>
                </div>
            </div>
        `,
        width: 600,
        showConfirmButton: false,
        showCloseButton: true
    });
}

function loadPublicGallery() {
    const gallery = JSON.parse(localStorage.getItem('gallery')) || [];
    const grid = document.getElementById('publicGalleryGrid');
    if (!grid) return;
    
    grid.innerHTML = '';
    
    gallery.forEach((imgUrl, index) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = 'gallery-item';
        galleryItem.innerHTML = `
            <img src="${imgUrl}" alt="Gallery image ${index + 1}">
            <div class="gallery-overlay">
                <div style="text-align: center;">
                    <p>Image ${index + 1}</p>
                    <button class="btn btn-sm btn-secondary" onclick="viewImage('${imgUrl}')">
                        <i class="fas fa-expand"></i> View
                    </button>
                </div>
            </div>
        `;
        
        galleryItem.onclick = function(e) {
            if (!e.target.closest('button')) {
                viewImage(imgUrl);
            }
        };
        
        grid.appendChild(galleryItem);
    });
}

function loadAdminGallery() {
    const gallery = JSON.parse(localStorage.getItem('gallery')) || [];
    const grid = document.getElementById('adminGallery');
    
    grid.innerHTML = '';
    
    gallery.forEach((imgUrl, index) => {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        item.innerHTML = `
            <img src="${imgUrl}" alt="Gallery image ${index + 1}">
            <div class="gallery-overlay">
                <button class="btn btn-sm btn-danger" onclick="deleteGalleryImage(${index})">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </div>
        `;
        grid.appendChild(item);
    });
}

function uploadGalleryImages(event) {
    const files = event.target.files;
    if (files.length === 0) return;
    
    // Demo: Use the first file
    const reader = new FileReader();
    reader.onload = function(e) {
        const gallery = JSON.parse(localStorage.getItem('gallery')) || [];
        gallery.push(e.target.result);
        localStorage.setItem('gallery', JSON.stringify(gallery));
        
        showNotification('success', 'Success', 'Image uploaded successfully');
        loadAdminGallery();
        loadPublicGallery();
    };
    
    reader.readAsDataURL(files[0]);
}

function deleteGalleryImage(index) {
    Swal.fire({
        title: 'Delete Image?',
        text: 'Are you sure you want to delete this image?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Yes, delete it',
        cancelButtonText: 'Cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            const gallery = JSON.parse(localStorage.getItem('gallery')) || [];
            gallery.splice(index, 1);
            localStorage.setItem('gallery', JSON.stringify(gallery));
            
            showNotification('success', 'Deleted', 'Image deleted successfully');
            loadAdminGallery();
            loadPublicGallery();
        }
    });
}

function viewImage(imgUrl) {
    document.getElementById('popupImg').src = imgUrl;
    openModal('imgPopup');
}

// ==================== EVENT MANAGEMENT ====================
function loadUpcomingEvents() {
    const events = JSON.parse(localStorage.getItem('events')) || [];
    const container = document.getElementById('upcomingEvents');
    
    events.sort((a, b) => new Date(a.date) - new Date(b.date));
    
    container.innerHTML = '';
    
    events.forEach((event, index) => {
        const eventDate = new Date(event.date);
        const formattedDate = eventDate.toLocaleDateString('en-IN', {
            day: 'numeric',
            month: 'short',
            year: 'numeric'
        });
        
        const eventDiv = document.createElement('div');
        eventDiv.className = 'status-card';
        eventDiv.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: start;">
                <div>
                    <h4 style="margin: 0 0 10px 0;">${event.title}</h4>
                    <p style="color: #666; margin: 0 0 10px 0;">${event.description}</p>
                    <div style="display: flex; gap: 15px; font-size: 0.9rem;">
                        <span><i class="fas fa-calendar"></i> ${formattedDate}</span>
                        <span class="status-indicator">${event.type}</span>
                    </div>
                </div>
                <button class="btn btn-sm btn-danger" onclick="deleteEvent(${index})">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        `;
        container.appendChild(eventDiv);
    });
}

function openAddEventModal() {
    openModal('addEventModal');
}

function addNewEvent() {
    const title = document.getElementById('newEventTitle').value.trim();
    const date = document.getElementById('newEventDate').value;
    const type = document.getElementById('newEventType').value;
    const description = document.getElementById('newEventDescription').value.trim();
    
    if (!title || !date || !description) {
        showNotification('error', 'Error', 'Please fill all required fields');
        return;
    }
    
    const events = JSON.parse(localStorage.getItem('events')) || [];
    events.push({
        title: title,
        date: date,
        type: type,
        description: description
    });
    
    localStorage.setItem('events', JSON.stringify(events));
    
    showNotification('success', 'Success', 'Event added successfully');
    closeModal('addEventModal');
    loadUpcomingEvents();
    generateCalendar();
    loadPublicEvents();
    
    // Clear form
    document.getElementById('newEventTitle').value = '';
    document.getElementById('newEventDate').value = '';
    document.getElementById('newEventDescription').value = '';
}

function deleteEvent(index) {
    Swal.fire({
        title: 'Delete Event?',
        text: 'Are you sure you want to delete this event?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Yes, delete it',
        cancelButtonText: 'Cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            const events = JSON.parse(localStorage.getItem('events')) || [];
            events.splice(index, 1);
            localStorage.setItem('events', JSON.stringify(events));
            
            showNotification('success', 'Deleted', 'Event deleted successfully');
            loadUpcomingEvents();
            generateCalendar();
            loadPublicEvents();
        }
    });
}

function generateCalendar() {
    const calendar = document.getElementById('calendar');
    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                       'July', 'August', 'September', 'October', 'November', 'December'];
    
    document.getElementById('currentMonth').textContent = `${monthNames[currentMonth]} ${currentYear}`;
    
    const firstDay = new Date(currentYear, currentMonth, 1).getDay();
    const lastDate = new Date(currentYear, currentMonth + 1, 0).getDate();
    const today = new Date();
    
    const events = JSON.parse(localStorage.getItem('events')) || [];
    const monthEvents = events.filter(event => {
        const eventDate = new Date(event.date);
        return eventDate.getMonth() === currentMonth && eventDate.getFullYear() === currentYear;
    });
    
    const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    calendar.innerHTML = '';
    
    days.forEach(day => {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day header';
        dayDiv.textContent = day;
        calendar.appendChild(dayDiv);
    });
    
    for (let i = 0; i < firstDay; i++) {
        const emptyDiv = document.createElement('div');
        emptyDiv.className = 'calendar-day';
        calendar.appendChild(emptyDiv);
    }
    
    for (let day = 1; day <= lastDate; day++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day';
        dayDiv.textContent = day;
        
        if (day === today.getDate() && currentMonth === today.getMonth() && currentYear === today.getFullYear()) {
            dayDiv.classList.add('today');
        }
        
        const hasEvent = monthEvents.some(event => {
            const eventDate = new Date(event.date);
            return eventDate.getDate() === day;
        });
        
        if (hasEvent) {
            dayDiv.classList.add('event');
        }
        
        calendar.appendChild(dayDiv);
    }
}

function prevMonth() {
    currentMonth--;
    if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
    }
    generateCalendar();
}

function nextMonth() {
    currentMonth++;
    if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
    }
    generateCalendar();
}

// ==================== UTILITY FUNCTIONS ====================
function getStatusClass(status) {
    switch(status) {
        case 'pending': return 'status-pending';
        case 'approved': return 'status-approved';
        case 'rejected': return 'status-rejected';
        default: return 'status-pending';
    }
}

function getPaymentStatusClass(status) {
    switch(status) {
        case 'paid': return 'status-paid';
        case 'partial': return 'status-partial';
        case 'unpaid': return 'status-unpaid';
        default: return 'status-unpaid';
    }
}

function getPaymentMethodColor(method) {
    const colors = {
        'cash': '#28a745',
        'cheque': '#17a2b8',
        'online': '#007bff',
        'card': '#6610f2',
        'upi': '#20c997'
    };
    return colors[method] || '#6c757d';
}

function switchTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    document.getElementById(tabId).classList.add('active');
    event.currentTarget.classList.add('active');
}

function openModal(modalId) {
    document.getElementById(modalId).classList.add('active');
}

function closeModal(modalId) {
    document.getElementById(modalId).classList.remove('active');
}

// ==================== DEMO FUNCTIONS ====================
function exportAdmissions() {
    showNotification('info', 'Export', 'Export functionality would be implemented in production');
}

function generateReport() {
    showNotification('info', 'Report', 'Report generation would be implemented in production');
}

function saveSettings() {
    showNotification('success', 'Settings Saved', 'Settings have been saved successfully');
}

function savePaymentSettings() {
    showNotification('success', 'Payment Settings', 'Payment settings saved successfully');
}

function saveNotificationSettings() {
    showNotification('success', 'Notification Settings', 'Notification settings saved successfully');
}

function createBackup() {
    showNotification('success', 'Backup Created', 'System backup has been created successfully');
}

function restoreBackup() {
    showNotification('info', 'Restore', 'Restore functionality would be implemented in production');
}
</script>
</body>
</html>
